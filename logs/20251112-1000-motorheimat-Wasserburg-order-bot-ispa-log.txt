2025-11-12 10:07:30,263 - ispa_next.main - DEBUG - ISPA Next attempt (1 / 5)
2025-11-12 10:07:30,268 - overlays.client - INFO - Connected to overlay manager pipe
2025-11-12 10:07:38,636 - ispa_next.app_start.functions - DEBUG - handle_update_available
2025-11-12 10:07:49,018 - ispa_next.app_start.functions - DEBUG - has_ispa_errors
2025-11-12 10:08:04,552 - ispa_next.app_start.functions - DEBUG - authenticate_user
2025-11-12 10:08:36,783 - ispa_next.app_start.main - DEBUG - Login successful
2025-11-12 10:08:48,250 - ispa_next.appointments.functions - DEBUG - order_appointments_grid_by_created_at
2025-11-12 10:08:51,134 - ispa_next.appointments.functions - DEBUG - filter_appointments_grid_by_term
2025-11-12 10:08:52,178 - ispa_next.appointments.functions - DEBUG - Gross total count for all events at location: 357
2025-11-12 10:08:52,180 - ispa_next.appointments.functions - DEBUG - Unfiltered total count for 'Terminvereinbarung' events: 70
2025-11-12 10:08:54,346 - ispa_next.appointments.functions - DEBUG - Filtered by term total count for 'Terminvereinbarung' events: 70
2025-11-12 10:08:54,347 - ispa_next.appointments.functions - DEBUG - recover_or_exit_IPS_error
2025-11-12 10:08:54,348 - ispa_next.appointments.functions - DEBUG - check_appointments_grid_for_IPS_error
2025-11-12 10:08:55,454 - ispa_next.appointments.functions - DEBUG - check_appointments_grid_for_IPS_error
2025-11-12 10:08:56,471 - ispa_next.appointments.functions - DEBUG - fetch_appointments_from_grid
2025-11-12 10:09:04,908 - ispa_next.appointments.models - DEBUG - Appointment Ömer Mayalar Herr WS-M 600 WBATX95010N026886 ohne Termin.
2025-11-12 10:09:04,909 - ispa_next.appointments.models - DEBUG - Skipping appointment without VIN
2025-11-12 10:09:04,919 - ispa_next.appointments.models - DEBUG - Appointment Waltraud Christina Huber Frau RO-TP 220 WBAYH11070EM74799 ohne Termin.
2025-11-12 10:09:04,928 - ispa_next.appointments.models - DEBUG - Appointment Reifschneider Johann Herr RO-XR 8888 WBA71AB0105S06300 ohne Termin.
2025-11-12 10:09:04,930 - ispa_next.appointments.models - DEBUG - Skipping appointment without VIN
2025-11-12 10:09:04,936 - ispa_next.appointments.models - DEBUG - Skipping appointment without VIN
2025-11-12 10:09:04,937 - ispa_next.appointments.models - DEBUG - Skipping appointment without VIN
2025-11-12 10:09:04,938 - ispa_next.appointments.models - DEBUG - Skipping appointment without VIN
2025-11-12 10:09:04,939 - ispa_next.appointments.models - DEBUG - Skipping appointment without VIN
2025-11-12 10:09:04,947 - ispa_next.appointments.models - DEBUG - Appointment Manfred Rappolder Herr MÜ-TE 2010 WBAJP51010BV48571 ohne Termin.
2025-11-12 10:09:04,954 - ispa_next.appointments.models - DEBUG - Appointment Bernd Hubert Klaus Nurtsch Herr MÜ-CO 25 E WBY8P610807K15051 ohne Termin.
2025-11-12 10:09:04,960 - ispa_next.appointments.models - DEBUG - Appointment Markus Ungar Herr EBE-U 400 WBA71BJ0X0WX30479 ohne Termin.
2025-11-12 10:09:04,960 - ispa_next.appointments.models - DEBUG - Skipping appointment without VIN
2025-11-12 10:09:04,966 - ispa_next.main - DEBUG - Found 3 out of 19 appointments to process (configured limit: 15).
2025-11-12 10:09:04,966 - ispa_next.main - DEBUG - Processing 2 fresh appointments.
2025-11-12 10:09:04,966 - ispa_next.main - DEBUG - Processing 1 already visited appointments (w/ RKR not callable).
2025-11-12 10:09:04,966 - ispa_next.main - DEBUG - All appointments: KEIN KENNZEICHEN, WS-MK 1214, WS-NJ 2021
2025-11-12 10:09:04,969 - ispa_next.main - DEBUG - 



2025-11-12 10:09:04,969 - ispa_next.main - DEBUG - starting with process 1 (KEIN KENNZEICHEN) of 3
2025-11-12 10:09:04,973 - ispa_next.appointment_loop.helpers - DEBUG - Checking for potential OIDC Login dialog
2025-11-12 10:09:05,868 - ispa_next.appointments.functions - DEBUG - filter_appointments_grid_by_term
2025-11-12 10:09:06,759 - ispa_next.appointments.functions - DEBUG - Gross total count for all events at location: 357
2025-11-12 10:09:06,760 - ispa_next.appointments.functions - DEBUG - Unfiltered total count for 'Terminvereinbarung' events: 70
2025-11-12 10:09:07,854 - ispa_next.appointments.functions - DEBUG - Filtered by term total count for 'Terminvereinbarung' events: 1
2025-11-12 10:09:07,855 - ispa_next.appointments.functions - DEBUG - fetch_appointments_from_grid
2025-11-12 10:09:39,575 - ispa_next.rkr_manager.main - DEBUG - RemoteKeyReadManager initialized
2025-11-12 10:09:48,018 - ispa_next.functions - DEBUG - get_cart_contents
2025-11-12 10:09:53,954 - ispa_next.functions - DEBUG - check_and_verify_hu_date
2025-11-12 10:09:53,955 - ispa_next.common.shared - DEBUG - Attempting to open ISPA tab: Kunden & Fahrzeug
2025-11-12 10:09:54,026 - ispa_next.common.shared - DEBUG - ISPA tab Kunden & Fahrzeug is already open
2025-11-12 10:09:54,234 - ispa_next.functions - DEBUG - HU date is not available.
2025-11-12 10:10:00,762 - ispa_next.functions - DEBUG - check_potential_workshop_test
2025-11-12 10:10:00,764 - ispa_next.functions - DEBUG - check_vehicle_age_for_service_plus
2025-11-12 10:10:00,764 - ispa_next.common.shared - DEBUG - Attempting to open ISPA tab: Kunden & Fahrzeug
2025-11-12 10:10:00,826 - ispa_next.common.shared - DEBUG - ISPA tab Kunden & Fahrzeug is already open
2025-11-12 10:10:03,829 - ispa_next.rkr_manager.main - DEBUG - running RemoteKeyReadManager
2025-11-12 10:10:03,831 - ispa_next.common.shared - DEBUG - Attempting to open ISPA tab: Wartung
2025-11-12 10:10:04,849 - ispa_next.common.shared - DEBUG - Successfully opened ISPA tab: Wartung
2025-11-12 10:10:06,853 - ispa_next.rkr_manager.state - DEBUG - Entering initial state
2025-11-12 10:10:06,988 - ispa_next.rkr_manager.state - DEBUG - Checking customer consent
2025-11-12 10:10:07,079 - ispa_next.rkr_manager.state - DEBUG - Checking data freshness
2025-11-12 10:10:07,198 - ispa_next.rkr_manager.state - DEBUG - Checking color in CBS positions
2025-11-12 10:10:09,350 - ispa_next.rkr_manager.state - DEBUG - State machine completed with reason: data_still_good
2025-11-12 10:10:10,356 - ispa_next.functions - DEBUG - handle_data_privacy_consent
2025-11-12 10:10:10,356 - ispa_next.common.shared - DEBUG - Attempting to open ISPA tab: Kunden & Fahrzeug
2025-11-12 10:10:10,860 - ispa_next.common.shared - DEBUG - Successfully opened ISPA tab: Kunden & Fahrzeug
2025-11-12 10:10:14,004 - ispa_next.functions - DEBUG - no DSE icon found
2025-11-12 10:10:14,006 - ispa_next.functions - DEBUG - transfer_customer_data_to_appointment
2025-11-12 10:10:14,010 - ispa_next.common.shared - DEBUG - Attempting to open ISPA tab: Kunden & Fahrzeug
2025-11-12 10:10:14,089 - ispa_next.common.shared - DEBUG - ISPA tab Kunden & Fahrzeug is already open
2025-11-12 10:10:14,091 - ispa_next.functions - DEBUG - fetch_customer_data
2025-11-12 10:10:14,148 - ispa_next.functions - DEBUG - fetch_customer_data_from_bmw_id
2025-11-12 10:10:15,413 - ispa_next.functions - DEBUG - All data found, skipping remaining sources
2025-11-12 10:10:15,667 - ispa_next.functions - DEBUG - copy_customer_data_to_appointment
2025-11-12 10:10:19,624 - ispa_next.functions - DEBUG - Updated appointment (AJ00018144) customer contact data.
2025-11-12 10:10:20,522 - ispa_next.functions - DEBUG - check_for_alpina_vehicle
2025-11-12 10:10:20,524 - ispa_next.functions - DEBUG - check_bmw_id_add_to_list
2025-11-12 10:10:21,318 - ispa_next.functions - DEBUG - check_home_dealer_add_to_list
2025-11-12 10:10:21,318 - ispa_next.common.shared - DEBUG - Attempting to open ISPA tab: Fahrzeugzustand
2025-11-12 10:10:21,975 - ispa_next.common.shared - DEBUG - Successfully opened ISPA tab: Fahrzeugzustand
2025-11-12 10:10:25,564 - ispa_next.rkr_manager.main - DEBUG - running RemoteKeyReadManager
2025-11-12 10:10:25,565 - ispa_next.rkr_manager.main - DEBUG - early exiting RemoteKeyReadManager - enabled=False or early_exit_enabled=True
2025-11-12 10:10:25,567 - ispa_next.functions - DEBUG - generate_attachments
2025-11-12 10:10:25,569 - ispa_next.functions - DEBUG - check_service_requirement
2025-11-12 10:10:25,569 - ispa_next.common.shared - DEBUG - Attempting to open ISPA tab: Wartung
2025-11-12 10:10:26,076 - ispa_next.common.shared - DEBUG - Successfully opened ISPA tab: Wartung
2025-11-12 10:10:30,213 - ispa_next.functions - DEBUG - check_service_requirement result: pdf_needed =True
2025-11-12 10:10:31,008 - ispa_next.functions - DEBUG - generate_appointment_pdfs
2025-11-12 10:10:46,540 - ispa_next.wipers - DEBUG - handle_wiper_service_contracts
2025-11-12 10:10:46,542 - ispa_next.common.shared - DEBUG - Attempting to open ISPA tab: Wartung
2025-11-12 10:10:46,633 - ispa_next.common.shared - DEBUG - ISPA tab Wartung is already open
2025-11-12 10:10:55,487 - ispa_next.common.shared - DEBUG - Attempting to open ISPA tab: Kunden & Fahrzeug
2025-11-12 10:10:55,984 - ispa_next.common.shared - DEBUG - Successfully opened ISPA tab: Kunden & Fahrzeug
2025-11-12 10:10:55,985 - ispa_next.common.shared - DEBUG - Attempting to open ISPA tab: Wartung
2025-11-12 10:10:56,883 - ispa_next.common.shared - DEBUG - Successfully opened ISPA tab: Wartung
2025-11-12 10:10:56,883 - ispa_next.package_manager.main - DEBUG - updating cart content
2025-11-12 10:11:02,287 - ispa_next.package_manager.main - DEBUG - updating advice list content
2025-11-12 10:11:02,290 - ispa_next.package_manager.helper - DEBUG - get_advice_list_contents
2025-11-12 10:11:03,889 - ispa_next.package_manager.main - DEBUG - determining package movements
2025-11-12 10:11:03,891 - ispa_next.package_manager.main - DEBUG - determining packages to place
2025-11-12 10:11:03,893 - ispa_next.package_manager.main - DEBUG - Cannot place Beide Bremsscheiben hinten aus- und einbauen/erset: placement requirements not met
2025-11-12 10:11:03,895 - ispa_next.package_manager.main - DEBUG - Cannot place Beide Bremsscheiben vorn aus- und einbauen/ersetze: placement requirements not met
2025-11-12 10:11:03,897 - ispa_next.package_manager.main - DEBUG - found packages to cart: {Package(name=Fahrzeug raussaugen, source=from_tab, target=cart)}
2025-11-12 10:11:03,897 - ispa_next.package_manager.main - DEBUG - determining packages to place
2025-11-12 10:11:03,899 - ispa_next.package_manager.main - DEBUG - Cannot place Ladewunsch und Ladezustand: not present in source
2025-11-12 10:11:03,901 - ispa_next.package_manager.main - DEBUG - found packages to advice_list: set()
2025-11-12 10:11:03,901 - ispa_next.package_manager.main - DEBUG - determining package to delete
2025-11-12 10:11:03,903 - ispa_next.package_manager.main - DEBUG - found packages to delete: set()
2025-11-12 10:11:03,905 - ispa_next.package_manager.main - DEBUG - determining package to update
2025-11-12 10:11:03,910 - ispa_next.package_manager.main - DEBUG - found packages to update: set()
2025-11-12 10:11:03,914 - ispa_next.package_manager.helper - DEBUG - add_to_cart called
2025-11-12 10:11:04,816 - ispa_next.common.shared - DEBUG - Attempting to open ISPA tab: Marketing
2025-11-12 10:11:05,744 - ispa_next.common.shared - DEBUG - Successfully opened ISPA tab: Marketing
2025-11-12 10:11:13,904 - ispa_next.package_manager.helper - DEBUG - _add_to_container_manual
2025-11-12 10:11:13,973 - ispa_next.functions - DEBUG - verify_cart_packages_additional_texts
2025-11-12 10:11:14,010 - ispa_next.functions - DEBUG - check_cart_for_additional_text_packages
2025-11-12 10:11:14,011 - ispa_next.functions - DEBUG - get_cart_contents
2025-11-12 10:11:20,681 - ispa_next.functions - DEBUG - handle_mobility_replacement
2025-11-12 10:11:20,683 - ispa_next.functions - DEBUG - verify_battery_in_motoroil_package
2025-11-12 10:11:20,685 - ispa_next.functions - DEBUG - get_cart_contents
2025-11-12 10:11:27,287 - ispa_next.common.shared - DEBUG - Attempting to open ISPA tab: Wartung
2025-11-12 10:11:27,796 - ispa_next.common.shared - DEBUG - Successfully opened ISPA tab: Wartung
2025-11-12 10:11:40,133 - ispa_next.functions - DEBUG - get_cart_contents
2025-11-12 10:11:57,738 - ispa_next.functions - DEBUG - verify_breaks_in_break_package
2025-11-12 10:11:57,738 - ispa_next.functions - DEBUG - verify breaks added if breaks service in cart
2025-11-12 10:11:57,740 - ispa_next.functions - DEBUG - get_cart_contents
2025-11-12 10:12:04,567 - ispa_next.functions - DEBUG - process_check_control
2025-11-12 10:12:04,569 - ispa_next.common.shared - DEBUG - Attempting to open ISPA tab: Beanstandungen
2025-11-12 10:12:05,618 - ispa_next.common.shared - DEBUG - Successfully opened ISPA tab: Beanstandungen
2025-11-12 10:12:05,934 - ispa_next.functions - DEBUG - get_cart_contents
2025-11-12 10:12:21,452 - ispa_next.functions - DEBUG - trying add_material_to_package
2025-11-12 10:12:21,454 - ispa_next.functions - DEBUG - get_cart_contents
2025-11-12 10:12:28,228 - ispa_next.functions - DEBUG - notify_aw_increase_to_service_advisor
2025-11-12 10:12:42,498 - ispa_next.functions - DEBUG - check_cart_packages_for_parts_service_and_parts_availability
2025-11-12 10:12:42,524 - ispa_next.appointment_ending - DEBUG - entered complete process
2025-11-12 10:12:42,524 - ispa_next.appointment_loop.helpers - DEBUG - Checking for potential OIDC Login dialog
2025-11-12 10:12:43,262 - ispa_next.common.shared - DEBUG - Attempting to open ISPA tab: Abschluss
2025-11-12 10:12:43,867 - ispa_next.common.shared - DEBUG - Successfully opened ISPA tab: Abschluss
2025-11-12 10:12:43,869 - ispa_next.appointment_ending - DEBUG - complete_process isn't exiting early.
2025-11-12 10:12:45,895 - ispa_next.appointment_ending - DEBUG - No need to assign service parts target.
2025-11-12 10:13:01,381 - ispa_next.appointment_ending - DEBUG - return from complete process straight to process_list with saving without error_dialog.
2025-11-12 10:13:01,770 - ispa_next.appointment_loop.main - DEBUG - Closing appointment 1.
2025-11-12 10:13:03,622 - ispa_next.appointments.functions - DEBUG - filter_appointments_grid_by_term
2025-11-12 10:13:04,448 - ispa_next.appointments.functions - DEBUG - Gross total count for all events at location: 357
2025-11-12 10:13:04,450 - ispa_next.appointments.functions - DEBUG - Unfiltered total count for 'Terminvereinbarung' events: 1
2025-11-12 10:13:08,242 - ispa_next.appointments.functions - DEBUG - Filtered by term total count for 'Terminvereinbarung' events: 70
2025-11-12 10:13:08,243 - ispa_next.appointments.functions - DEBUG - fetch_appointments_from_grid
2025-11-12 10:13:09,380 - ispa_next.appointments.models - DEBUG - Appointment Ömer Mayalar Herr WS-M 600 WBATX95010N026886 ohne Termin.
2025-11-12 10:13:09,384 - ispa_next.main - DEBUG - 



2025-11-12 10:13:09,384 - ispa_next.main - DEBUG - starting with process 2 (WS-MK 1214) of 3
2025-11-12 10:13:09,388 - ispa_next.appointment_loop.helpers - DEBUG - Checking for potential OIDC Login dialog
2025-11-12 10:13:10,973 - ispa_next.appointments.functions - DEBUG - filter_appointments_grid_by_term
2025-11-12 10:13:12,722 - ispa_next.appointments.functions - DEBUG - Gross total count for all events at location: 357
2025-11-12 10:13:12,724 - ispa_next.appointments.functions - DEBUG - Unfiltered total count for 'Terminvereinbarung' events: 70
2025-11-12 10:13:14,447 - ispa_next.appointments.functions - DEBUG - Filtered by term total count for 'Terminvereinbarung' events: 1
2025-11-12 10:13:14,449 - ispa_next.appointments.functions - DEBUG - fetch_appointments_from_grid
2025-11-12 10:13:44,353 - ispa_next.rkr_manager.main - DEBUG - RemoteKeyReadManager initialized
2025-11-12 10:13:56,044 - ispa_next.common.shared - DEBUG - Attempting to open ISPA tab: Kunden & Fahrzeug
2025-11-12 10:13:56,165 - ispa_next.common.shared - DEBUG - ISPA tab Kunden & Fahrzeug is already open
2025-11-12 10:13:56,419 - ispa_next.functions - DEBUG - get_cart_contents
2025-11-12 10:13:57,676 - ispa_next.functions - DEBUG - check_and_verify_hu_date
2025-11-12 10:13:57,676 - ispa_next.common.shared - DEBUG - Attempting to open ISPA tab: Kunden & Fahrzeug
2025-11-12 10:13:57,795 - ispa_next.common.shared - DEBUG - ISPA tab Kunden & Fahrzeug is already open
2025-11-12 10:13:58,181 - ispa_next.functions - DEBUG - check_potential_workshop_test
2025-11-12 10:13:58,183 - ispa_next.functions - DEBUG - check_vehicle_age_for_service_plus
2025-11-12 10:13:58,185 - ispa_next.common.shared - DEBUG - Attempting to open ISPA tab: Kunden & Fahrzeug
2025-11-12 10:13:58,304 - ispa_next.common.shared - DEBUG - ISPA tab Kunden & Fahrzeug is already open
2025-11-12 10:14:09,833 - ispa_next.rkr_manager.main - DEBUG - running RemoteKeyReadManager
2025-11-12 10:14:09,835 - ispa_next.common.shared - DEBUG - Attempting to open ISPA tab: Wartung
2025-11-12 10:14:11,228 - ispa_next.common.shared - DEBUG - Successfully opened ISPA tab: Wartung
2025-11-12 10:14:13,232 - ispa_next.rkr_manager.state - DEBUG - Entering initial state
2025-11-12 10:14:20,421 - ispa_next.rkr_manager.state - DEBUG - RKR not available or supported
2025-11-12 10:14:29,639 - ispa_next.rkr_manager.state - DEBUG - State machine completed with reason: no_support
2025-11-12 10:14:30,643 - ispa_next.functions - DEBUG - handle_data_privacy_consent
2025-11-12 10:14:30,643 - ispa_next.common.shared - DEBUG - Attempting to open ISPA tab: Kunden & Fahrzeug
2025-11-12 10:14:31,190 - ispa_next.common.shared - DEBUG - Successfully opened ISPA tab: Kunden & Fahrzeug
2025-11-12 10:14:47,361 - ispa_next.functions - DEBUG - DSE icon is red
2025-11-12 10:14:55,809 - ispa_next.functions - DEBUG - transfer_customer_data_to_appointment
2025-11-12 10:14:55,811 - ispa_next.common.shared - DEBUG - Attempting to open ISPA tab: Kunden & Fahrzeug
2025-11-12 10:14:55,886 - ispa_next.common.shared - DEBUG - ISPA tab Kunden & Fahrzeug is already open
2025-11-12 10:14:55,887 - ispa_next.functions - DEBUG - fetch_customer_data
2025-11-12 10:14:55,965 - ispa_next.functions - DEBUG - fetch_customer_data_from_bmw_id
2025-11-12 10:14:56,145 - ispa_next.functions - DEBUG - fetch_customer_data_from_dms
2025-11-12 10:14:57,311 - ispa_next.functions - DEBUG - fetch_customer_data_from_wps
2025-11-12 10:14:58,615 - ispa_next.functions - DEBUG - fetch_customer_data_from_temporary_data
2025-11-12 10:14:59,041 - ispa_next.functions - DEBUG - copy_customer_data_to_appointment
2025-11-12 10:15:02,662 - ispa_next.functions - DEBUG - Updated appointment (AJ00018138) customer contact data.
2025-11-12 10:15:03,599 - ispa_next.functions - DEBUG - check_for_alpina_vehicle
2025-11-12 10:15:03,604 - ispa_next.functions - DEBUG - check_bmw_id_add_to_list
2025-11-12 10:15:04,017 - ispa_next.common.shared - DEBUG - Attempting to open ISPA tab: Fahrzeugzustand
2025-11-12 10:15:04,862 - ispa_next.common.shared - DEBUG - Successfully opened ISPA tab: Fahrzeugzustand
2025-11-12 10:15:06,930 - ispa_next.functions - DEBUG - check_home_dealer_add_to_list
2025-11-12 10:15:06,932 - ispa_next.common.shared - DEBUG - Attempting to open ISPA tab: Fahrzeugzustand
2025-11-12 10:15:07,160 - ispa_next.common.shared - DEBUG - ISPA tab Fahrzeugzustand is already open
2025-11-12 10:15:11,204 - ispa_next.functions - DEBUG - Home dealer assignment button not available
2025-11-12 10:15:11,204 - ispa_next.rkr_manager.main - DEBUG - running RemoteKeyReadManager
2025-11-12 10:15:11,204 - ispa_next.rkr_manager.main - DEBUG - early exiting RemoteKeyReadManager - enabled=False or early_exit_enabled=True
2025-11-12 10:15:11,206 - ispa_next.functions - DEBUG - generate_attachments
2025-11-12 10:15:11,206 - ispa_next.functions - DEBUG - check_service_requirement
2025-11-12 10:15:11,207 - ispa_next.common.shared - DEBUG - Attempting to open ISPA tab: Wartung
2025-11-12 10:15:11,795 - ispa_next.common.shared - DEBUG - Successfully opened ISPA tab: Wartung
2025-11-12 10:15:15,930 - ispa_next.functions - DEBUG - check_service_requirement result: pdf_needed =False
2025-11-12 10:15:15,934 - ispa_next.wipers - DEBUG - handle_wiper_service_contracts
2025-11-12 10:15:15,935 - ispa_next.common.shared - DEBUG - Attempting to open ISPA tab: Wartung
2025-11-12 10:15:16,012 - ispa_next.common.shared - DEBUG - ISPA tab Wartung is already open
2025-11-12 10:15:16,387 - ispa_next.common.shared - DEBUG - Attempting to open ISPA tab: Kunden & Fahrzeug
2025-11-12 10:15:16,947 - ispa_next.common.shared - DEBUG - Successfully opened ISPA tab: Kunden & Fahrzeug
2025-11-12 10:15:16,947 - ispa_next.common.shared - DEBUG - Attempting to open ISPA tab: Wartung
2025-11-12 10:15:17,736 - ispa_next.common.shared - DEBUG - Successfully opened ISPA tab: Wartung
2025-11-12 10:15:17,736 - ispa_next.package_manager.main - DEBUG - updating cart content
2025-11-12 10:15:19,046 - ispa_next.package_manager.main - DEBUG - updating advice list content
2025-11-12 10:15:19,048 - ispa_next.package_manager.helper - DEBUG - get_advice_list_contents
2025-11-12 10:15:20,533 - ispa_next.package_manager.main - DEBUG - determining package movements
2025-11-12 10:15:20,535 - ispa_next.package_manager.main - DEBUG - determining packages to place
2025-11-12 10:15:20,537 - ispa_next.package_manager.main - DEBUG - Cannot place Beide Bremsscheiben hinten aus- und einbauen/erset: placement requirements not met
2025-11-12 10:15:20,539 - ispa_next.package_manager.main - DEBUG - Cannot place Beide Bremsscheiben vorn aus- und einbauen/ersetze: placement requirements not met
2025-11-12 10:15:20,541 - ispa_next.package_manager.main - DEBUG - found packages to cart: {Package(name=Fahrzeug raussaugen, source=from_tab, target=cart)}
2025-11-12 10:15:20,541 - ispa_next.package_manager.main - DEBUG - determining packages to place
2025-11-12 10:15:20,543 - ispa_next.package_manager.main - DEBUG - Cannot place Ladewunsch und Ladezustand: not present in source
2025-11-12 10:15:20,545 - ispa_next.package_manager.main - DEBUG - found packages to advice_list: set()
2025-11-12 10:15:20,545 - ispa_next.package_manager.main - DEBUG - determining package to delete
2025-11-12 10:15:20,547 - ispa_next.package_manager.main - DEBUG - found packages to delete: set()
2025-11-12 10:15:20,547 - ispa_next.package_manager.main - DEBUG - determining package to update
2025-11-12 10:15:20,549 - ispa_next.package_manager.main - DEBUG - found packages to update: set()
2025-11-12 10:15:20,551 - ispa_next.package_manager.helper - DEBUG - add_to_cart called
2025-11-12 10:15:21,229 - ispa_next.common.shared - DEBUG - Attempting to open ISPA tab: Marketing
2025-11-12 10:15:21,964 - ispa_next.common.shared - DEBUG - Successfully opened ISPA tab: Marketing
2025-11-12 10:15:29,548 - ispa_next.package_manager.helper - DEBUG - _add_to_container_manual
2025-11-12 10:15:29,597 - ispa_next.functions - DEBUG - verify_cart_packages_additional_texts
2025-11-12 10:15:29,599 - ispa_next.functions - DEBUG - check_cart_for_additional_text_packages
2025-11-12 10:15:29,601 - ispa_next.functions - DEBUG - get_cart_contents
2025-11-12 10:15:31,572 - ispa_next.functions - DEBUG - handle_mobility_replacement
2025-11-12 10:15:31,573 - ispa_next.functions - DEBUG - verify_battery_in_motoroil_package
2025-11-12 10:15:31,575 - ispa_next.functions - DEBUG - get_cart_contents
2025-11-12 10:15:33,451 - ispa_next.functions - DEBUG - verify_breaks_in_break_package
2025-11-12 10:15:33,451 - ispa_next.functions - DEBUG - verify breaks added if breaks service in cart
2025-11-12 10:15:33,452 - ispa_next.functions - DEBUG - get_cart_contents
2025-11-12 10:15:35,352 - ispa_next.functions - DEBUG - process_check_control
2025-11-12 10:15:35,354 - ispa_next.common.shared - DEBUG - Attempting to open ISPA tab: Beanstandungen
2025-11-12 10:15:35,855 - ispa_next.common.shared - DEBUG - Successfully opened ISPA tab: Beanstandungen
2025-11-12 10:15:35,911 - ispa_next.functions - DEBUG - trying add_material_to_package
2025-11-12 10:15:35,915 - ispa_next.functions - DEBUG - get_cart_contents
2025-11-12 10:15:37,855 - ispa_next.functions - DEBUG - notify_aw_increase_to_service_advisor
2025-11-12 10:15:51,156 - ispa_next.functions - DEBUG - check_cart_packages_for_parts_service_and_parts_availability
2025-11-12 10:15:51,157 - ispa_next.appointment_ending - DEBUG - entered complete process
2025-11-12 10:15:51,158 - ispa_next.appointment_loop.helpers - DEBUG - Checking for potential OIDC Login dialog
2025-11-12 10:15:51,999 - ispa_next.common.shared - DEBUG - Attempting to open ISPA tab: Abschluss
2025-11-12 10:15:52,631 - ispa_next.common.shared - DEBUG - Successfully opened ISPA tab: Abschluss
2025-11-12 10:15:52,631 - ispa_next.appointment_ending - DEBUG - complete_process isn't exiting early.
2025-11-12 10:15:55,029 - ispa_next.appointment_ending - DEBUG - No need to assign service parts target.
2025-11-12 10:16:04,979 - ispa_next.appointment_ending - DEBUG - return from complete process straight to process_list with saving without error_dialog.
2025-11-12 10:16:05,361 - ispa_next.appointment_loop.main - DEBUG - Closing appointment 2.
2025-11-12 10:16:06,714 - ispa_next.appointments.functions - DEBUG - filter_appointments_grid_by_term
2025-11-12 10:16:07,323 - ispa_next.appointments.functions - DEBUG - Gross total count for all events at location: 357
2025-11-12 10:16:07,325 - ispa_next.appointments.functions - DEBUG - Unfiltered total count for 'Terminvereinbarung' events: 1
2025-11-12 10:16:10,900 - ispa_next.appointments.functions - DEBUG - Filtered by term total count for 'Terminvereinbarung' events: 65
2025-11-12 10:16:10,901 - ispa_next.appointments.functions - DEBUG - fetch_appointments_from_grid
2025-11-12 10:16:11,811 - ispa_next.appointments.models - DEBUG - Appointment Ömer Mayalar Herr WS-M 600 WBATX95010N026886 ohne Termin.
2025-11-12 10:16:11,811 - ispa_next.appointments.models - DEBUG - Skipping appointment without VIN
2025-11-12 10:16:11,814 - ispa_next.main - DEBUG - 



2025-11-12 10:16:11,814 - ispa_next.main - DEBUG - starting with process 3 (WS-NJ 2021) of 3
2025-11-12 10:16:11,816 - ispa_next.appointment_loop.helpers - DEBUG - Checking for potential OIDC Login dialog
2025-11-12 10:16:13,229 - ispa_next.appointments.functions - DEBUG - filter_appointments_grid_by_term
2025-11-12 10:16:14,508 - ispa_next.appointments.functions - DEBUG - Gross total count for all events at location: 357
2025-11-12 10:16:14,509 - ispa_next.appointments.functions - DEBUG - Unfiltered total count for 'Terminvereinbarung' events: 65
2025-11-12 10:16:15,981 - ispa_next.appointments.functions - DEBUG - Filtered by term total count for 'Terminvereinbarung' events: 1
2025-11-12 10:16:15,982 - ispa_next.appointments.functions - DEBUG - fetch_appointments_from_grid
2025-11-12 10:16:50,313 - ispa_next.rkr_manager.main - DEBUG - RemoteKeyReadManager initialized
2025-11-12 10:16:52,554 - ispa_next.appointments.functions - DEBUG - Appointment was already processed in the past.
2025-11-12 10:16:58,527 - ispa_next.functions - DEBUG - get_cart_contents
2025-11-12 10:17:01,817 - ispa_next.functions - DEBUG - check_and_verify_hu_date
2025-11-12 10:17:01,819 - ispa_next.common.shared - DEBUG - Attempting to open ISPA tab: Kunden & Fahrzeug
2025-11-12 10:17:01,889 - ispa_next.common.shared - DEBUG - ISPA tab Kunden & Fahrzeug is already open
2025-11-12 10:17:02,217 - ispa_next.functions - DEBUG - HU date soon to be invalid in 50 days.
2025-11-12 10:17:06,773 - ispa_next.functions - DEBUG - check_potential_workshop_test
2025-11-12 10:17:06,775 - ispa_next.functions - DEBUG - check_vehicle_age_for_service_plus
2025-11-12 10:17:06,777 - ispa_next.common.shared - DEBUG - Attempting to open ISPA tab: Kunden & Fahrzeug
2025-11-12 10:17:06,875 - ispa_next.common.shared - DEBUG - ISPA tab Kunden & Fahrzeug is already open
2025-11-12 10:17:10,357 - ispa_next.rkr_manager.main - DEBUG - running RemoteKeyReadManager
2025-11-12 10:17:10,359 - ispa_next.common.shared - DEBUG - Attempting to open ISPA tab: Wartung
2025-11-12 10:17:11,953 - ispa_next.common.shared - DEBUG - Successfully opened ISPA tab: Wartung
2025-11-12 10:17:13,959 - ispa_next.rkr_manager.state - DEBUG - Entering initial state
2025-11-12 10:17:14,082 - ispa_next.rkr_manager.state - DEBUG - Checking customer consent
2025-11-12 10:17:14,270 - ispa_next.rkr_manager.state - DEBUG - Checking data freshness
2025-11-12 10:17:14,410 - ispa_next.rkr_manager.state - DEBUG - Checking color in CBS positions
2025-11-12 10:17:18,614 - ispa_next.rkr_manager.state - DEBUG - State machine completed with reason: data_still_good
2025-11-12 10:17:19,622 - ispa_next.functions - DEBUG - handle_data_privacy_consent
2025-11-12 10:17:19,622 - ispa_next.common.shared - DEBUG - Attempting to open ISPA tab: Kunden & Fahrzeug
2025-11-12 10:17:20,148 - ispa_next.common.shared - DEBUG - Successfully opened ISPA tab: Kunden & Fahrzeug
2025-11-12 10:17:36,303 - ispa_next.functions - DEBUG - DSE icon is red
2025-11-12 10:17:41,700 - ispa_next.functions - DEBUG - transfer_customer_data_to_appointment
2025-11-12 10:17:41,703 - ispa_next.common.shared - DEBUG - Attempting to open ISPA tab: Kunden & Fahrzeug
2025-11-12 10:17:41,801 - ispa_next.common.shared - DEBUG - ISPA tab Kunden & Fahrzeug is already open
2025-11-12 10:17:41,801 - ispa_next.functions - DEBUG - fetch_customer_data
2025-11-12 10:17:41,844 - ispa_next.functions - DEBUG - fetch_customer_data_from_bmw_id
2025-11-12 10:17:43,333 - ispa_next.functions - DEBUG - All data found, skipping remaining sources
2025-11-12 10:17:43,543 - ispa_next.functions - DEBUG - copy_customer_data_to_appointment
2025-11-12 10:17:45,672 - ispa_next.functions - DEBUG - Updated appointment (AB00084146) customer contact data.
2025-11-12 10:17:46,594 - ispa_next.functions - DEBUG - check_for_alpina_vehicle
2025-11-12 10:17:46,595 - ispa_next.functions - DEBUG - check_bmw_id_add_to_list
2025-11-12 10:17:47,816 - ispa_next.functions - DEBUG - check_home_dealer_add_to_list
2025-11-12 10:17:47,816 - ispa_next.common.shared - DEBUG - Attempting to open ISPA tab: Fahrzeugzustand
2025-11-12 10:17:48,884 - ispa_next.common.shared - DEBUG - Successfully opened ISPA tab: Fahrzeugzustand
2025-11-12 10:17:52,981 - ispa_next.functions - DEBUG - Home dealer assignment button not available
2025-11-12 10:17:52,981 - ispa_next.rkr_manager.main - DEBUG - running RemoteKeyReadManager
2025-11-12 10:17:52,981 - ispa_next.rkr_manager.main - DEBUG - early exiting RemoteKeyReadManager - enabled=False or early_exit_enabled=True
2025-11-12 10:17:52,983 - ispa_next.functions - DEBUG - generate_attachments
2025-11-12 10:17:52,985 - ispa_next.functions - DEBUG - check_service_requirement
2025-11-12 10:17:52,985 - ispa_next.common.shared - DEBUG - Attempting to open ISPA tab: Wartung
2025-11-12 10:17:53,492 - ispa_next.common.shared - DEBUG - Successfully opened ISPA tab: Wartung
2025-11-12 10:17:57,647 - ispa_next.functions - DEBUG - check_service_requirement result: pdf_needed =True
2025-11-12 10:18:02,823 - ispa_next.wipers - DEBUG - handle_wiper_service_contracts
2025-11-12 10:18:02,823 - ispa_next.common.shared - DEBUG - Attempting to open ISPA tab: Wartung
2025-11-12 10:18:02,952 - ispa_next.common.shared - DEBUG - ISPA tab Wartung is already open
2025-11-12 10:18:09,674 - ispa_next.common.shared - DEBUG - Attempting to open ISPA tab: Kunden & Fahrzeug
2025-11-12 10:18:10,197 - ispa_next.common.shared - DEBUG - Successfully opened ISPA tab: Kunden & Fahrzeug
2025-11-12 10:18:10,198 - ispa_next.common.shared - DEBUG - Attempting to open ISPA tab: Wartung
2025-11-12 10:18:11,076 - ispa_next.common.shared - DEBUG - Successfully opened ISPA tab: Wartung
2025-11-12 10:18:11,078 - ispa_next.package_manager.main - DEBUG - updating cart content
2025-11-12 10:18:14,217 - ispa_next.package_manager.main - DEBUG - updating advice list content
2025-11-12 10:18:14,220 - ispa_next.package_manager.helper - DEBUG - get_advice_list_contents
2025-11-12 10:18:15,639 - ispa_next.package_manager.main - DEBUG - determining package movements
2025-11-12 10:18:15,641 - ispa_next.package_manager.main - DEBUG - determining packages to place
2025-11-12 10:18:15,643 - ispa_next.package_manager.main - DEBUG - Cannot place Beide Bremsscheiben hinten aus- und einbauen/erset: placement requirements not met
2025-11-12 10:18:15,644 - ispa_next.package_manager.main - DEBUG - Cannot place Beide Bremsscheiben vorn aus- und einbauen/ersetze: placement requirements not met
2025-11-12 10:18:15,646 - ispa_next.package_manager.main - DEBUG - found packages to cart: set()
2025-11-12 10:18:15,648 - ispa_next.package_manager.main - DEBUG - determining packages to place
2025-11-12 10:18:15,650 - ispa_next.package_manager.main - DEBUG - Cannot place Ladewunsch und Ladezustand: not present in source
2025-11-12 10:18:15,652 - ispa_next.package_manager.main - DEBUG - found packages to advice_list: set()
2025-11-12 10:18:15,661 - ispa_next.package_manager.main - DEBUG - determining package to delete
2025-11-12 10:18:15,665 - ispa_next.package_manager.main - DEBUG - found packages to delete: set()
2025-11-12 10:18:15,670 - ispa_next.package_manager.main - DEBUG - determining package to update
2025-11-12 10:18:15,673 - ispa_next.package_manager.main - DEBUG - found packages to update: set()
2025-11-12 10:18:15,675 - ispa_next.functions - DEBUG - verify_cart_packages_additional_texts
2025-11-12 10:18:15,677 - ispa_next.functions - DEBUG - check_cart_for_additional_text_packages
2025-11-12 10:18:15,677 - ispa_next.functions - DEBUG - get_cart_contents
2025-11-12 10:18:19,092 - ispa_next.functions - DEBUG - handle_mobility_replacement
2025-11-12 10:18:19,092 - ispa_next.functions - DEBUG - verify_battery_in_motoroil_package
2025-11-12 10:18:19,098 - ispa_next.functions - DEBUG - get_cart_contents
2025-11-12 10:18:22,418 - ispa_next.common.shared - DEBUG - Attempting to open ISPA tab: Wartung
2025-11-12 10:18:22,542 - ispa_next.common.shared - DEBUG - ISPA tab Wartung is already open
2025-11-12 10:18:32,981 - ispa_next.functions - DEBUG - verify_breaks_in_break_package
2025-11-12 10:18:32,981 - ispa_next.functions - DEBUG - verify breaks added if breaks service in cart
2025-11-12 10:18:32,983 - ispa_next.functions - DEBUG - get_cart_contents
2025-11-12 10:18:36,375 - ispa_next.functions - DEBUG - process_check_control
2025-11-12 10:18:36,375 - ispa_next.common.shared - DEBUG - Attempting to open ISPA tab: Beanstandungen
2025-11-12 10:18:37,668 - ispa_next.common.shared - DEBUG - Successfully opened ISPA tab: Beanstandungen
2025-11-12 10:18:37,945 - ispa_next.functions - DEBUG - get_cart_contents
2025-11-12 10:18:50,171 - ispa_next.functions - DEBUG - trying add_material_to_package
2025-11-12 10:18:50,172 - ispa_next.functions - DEBUG - get_cart_contents
2025-11-12 10:18:53,497 - ispa_next.functions - DEBUG - notify_aw_increase_to_service_advisor
2025-11-12 10:19:07,978 - ispa_next.functions - DEBUG - check_cart_packages_for_parts_service_and_parts_availability
2025-11-12 10:19:07,980 - ispa_next.appointment_ending - DEBUG - entered complete process
2025-11-12 10:19:07,980 - ispa_next.appointment_loop.helpers - DEBUG - Checking for potential OIDC Login dialog
2025-11-12 10:19:08,840 - ispa_next.common.shared - DEBUG - Attempting to open ISPA tab: Abschluss
2025-11-12 10:19:09,472 - ispa_next.common.shared - DEBUG - Successfully opened ISPA tab: Abschluss
2025-11-12 10:19:09,474 - ispa_next.appointment_ending - DEBUG - complete_process isn't exiting early.
2025-11-12 10:19:11,879 - ispa_next.appointment_ending - DEBUG - No need to assign service parts target.
2025-11-12 10:19:21,983 - ispa_next.appointment_ending - DEBUG - return from complete process straight to process_list with saving without error_dialog.
2025-11-12 10:19:22,359 - ispa_next.appointment_loop.main - DEBUG - Closing appointment 3.
2025-11-12 10:19:23,939 - ispa_next.appointments.functions - DEBUG - filter_appointments_grid_by_term
2025-11-12 10:19:24,617 - ispa_next.appointments.functions - DEBUG - Gross total count for all events at location: 357
2025-11-12 10:19:24,617 - ispa_next.appointments.functions - DEBUG - Unfiltered total count for 'Terminvereinbarung' events: 1
2025-11-12 10:19:27,855 - ispa_next.appointments.functions - DEBUG - Filtered by term total count for 'Terminvereinbarung' events: 65
2025-11-12 10:19:27,856 - ispa_next.appointments.functions - DEBUG - fetch_appointments_from_grid
2025-11-12 10:19:28,827 - ispa_next.appointments.models - DEBUG - Appointment Ömer Mayalar Herr WS-M 600 WBATX95010N026886 ohne Termin.
2025-11-12 10:19:28,827 - ispa_next.appointments.models - DEBUG - Skipping appointment without VIN
