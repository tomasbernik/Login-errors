2025-11-12 13:21:35,012 - ispa_next.main - DEBUG - ISPA Next attempt (1 / 5)
2025-11-12 13:21:35,035 - overlays.client - INFO - Connected to overlay manager pipe
2025-11-12 13:21:43,884 - ispa_next.app_start.functions - DEBUG - handle_update_available
2025-11-12 13:21:54,218 - ispa_next.app_start.functions - DEBUG - has_ispa_errors
2025-11-12 13:22:09,776 - ispa_next.app_start.functions - DEBUG - authenticate_user
2025-11-12 13:22:34,059 - ispa_next.app_start.main - DEBUG - Login successful
2025-11-12 13:22:47,266 - ispa_next.appointments.functions - DEBUG - order_appointments_grid_by_created_at
2025-11-12 13:22:49,839 - ispa_next.appointments.functions - DEBUG - filter_appointments_grid_by_term
2025-11-12 13:22:50,844 - ispa_next.appointments.functions - DEBUG - Gross total count for all events at location: 193
2025-11-12 13:22:50,846 - ispa_next.appointments.functions - DEBUG - Unfiltered total count for 'Terminvereinbarung' events: 80
2025-11-12 13:22:53,059 - ispa_next.appointments.functions - DEBUG - Filtered by term total count for 'Terminvereinbarung' events: 54
2025-11-12 13:22:53,060 - ispa_next.appointments.functions - DEBUG - recover_or_exit_IPS_error
2025-11-12 13:22:53,060 - ispa_next.appointments.functions - DEBUG - check_appointments_grid_for_IPS_error
2025-11-12 13:22:54,142 - ispa_next.appointments.functions - DEBUG - check_appointments_grid_for_IPS_error
2025-11-12 13:22:55,031 - ispa_next.appointments.functions - DEBUG - fetch_appointments_from_grid
2025-11-12 13:23:01,872 - ispa_next.appointments.models - DEBUG - Skipping appointment without VIN
2025-11-12 13:23:01,890 - ispa_next.appointments.models - DEBUG - Skipping appointment without VIN
2025-11-12 13:23:01,891 - ispa_next.appointments.models - DEBUG - Skipping appointment without VIN
2025-11-12 13:23:01,895 - ispa_next.main - DEBUG - Found 3 out of 11 appointments to process (configured limit: 15).
2025-11-12 13:23:01,895 - ispa_next.main - DEBUG - Processing 0 fresh appointments.
2025-11-12 13:23:01,896 - ispa_next.main - DEBUG - Processing 3 already visited appointments (w/ RKR not callable).
2025-11-12 13:23:01,896 - ispa_next.main - DEBUG - All appointments: TS-M 2679, TS-MV 266 E, TS-SU 348
2025-11-12 13:23:01,899 - ispa_next.main - DEBUG - 



2025-11-12 13:23:01,899 - ispa_next.main - DEBUG - starting with process 1 (TS-M 2679) of 3
2025-11-12 13:23:01,901 - ispa_next.appointment_loop.helpers - DEBUG - Checking for potential OIDC Login dialog
2025-11-12 13:23:02,919 - ispa_next.appointments.functions - DEBUG - filter_appointments_grid_by_term
2025-11-12 13:23:03,975 - ispa_next.appointments.functions - DEBUG - Gross total count for all events at location: 193
2025-11-12 13:23:03,976 - ispa_next.appointments.functions - DEBUG - Unfiltered total count for 'Terminvereinbarung' events: 54
2025-11-12 13:23:05,175 - ispa_next.appointments.functions - DEBUG - Filtered by term total count for 'Terminvereinbarung' events: 1
2025-11-12 13:23:05,176 - ispa_next.appointments.functions - DEBUG - fetch_appointments_from_grid
2025-11-12 13:23:39,704 - ispa_next.rkr_manager.main - DEBUG - RemoteKeyReadManager initialized
2025-11-12 13:23:41,472 - ispa_next.appointments.functions - DEBUG - Appointment was already processed in the past.
2025-11-12 13:23:46,317 - ispa_next.functions - DEBUG - get_cart_contents
2025-11-12 13:23:49,504 - ispa_next.functions - DEBUG - check_and_verify_hu_date
2025-11-12 13:23:49,505 - ispa_next.common.shared - DEBUG - Attempting to open ISPA tab: Kunden & Fahrzeug
2025-11-12 13:23:49,569 - ispa_next.common.shared - DEBUG - ISPA tab Kunden & Fahrzeug is already open
2025-11-12 13:23:49,778 - ispa_next.functions - DEBUG - check_potential_workshop_test
2025-11-12 13:23:49,780 - ispa_next.functions - DEBUG - check_vehicle_age_for_service_plus
2025-11-12 13:23:49,780 - ispa_next.common.shared - DEBUG - Attempting to open ISPA tab: Kunden & Fahrzeug
2025-11-12 13:23:49,865 - ispa_next.common.shared - DEBUG - ISPA tab Kunden & Fahrzeug is already open
2025-11-12 13:23:52,836 - ispa_next.rkr_manager.main - DEBUG - running RemoteKeyReadManager
2025-11-12 13:23:52,838 - ispa_next.common.shared - DEBUG - Attempting to open ISPA tab: Wartung
2025-11-12 13:23:53,590 - ispa_next.common.shared - DEBUG - Successfully opened ISPA tab: Wartung
2025-11-12 13:23:55,596 - ispa_next.rkr_manager.state - DEBUG - Entering initial state
2025-11-12 13:23:55,718 - ispa_next.rkr_manager.state - DEBUG - Checking customer consent
2025-11-12 13:23:55,833 - ispa_next.rkr_manager.state - DEBUG - Checking data freshness
2025-11-12 13:23:55,933 - ispa_next.rkr_manager.state - DEBUG - Checking color in CBS positions
2025-11-12 13:24:00,083 - ispa_next.rkr_manager.state - DEBUG - State machine completed with reason: data_still_good
2025-11-12 13:24:01,088 - ispa_next.functions - DEBUG - handle_data_privacy_consent
2025-11-12 13:24:01,088 - ispa_next.common.shared - DEBUG - Attempting to open ISPA tab: Kunden & Fahrzeug
2025-11-12 13:24:01,577 - ispa_next.common.shared - DEBUG - Successfully opened ISPA tab: Kunden & Fahrzeug
2025-11-12 13:24:12,242 - ispa_next.functions - DEBUG - DSE icon is yellow
2025-11-12 13:24:12,242 - ispa_next.functions - DEBUG - DSE dealer channels are valid
2025-11-12 13:24:15,782 - ispa_next.functions - DEBUG - transfer_customer_data_to_appointment
2025-11-12 13:24:15,786 - ispa_next.common.shared - DEBUG - Attempting to open ISPA tab: Kunden & Fahrzeug
2025-11-12 13:24:15,870 - ispa_next.common.shared - DEBUG - ISPA tab Kunden & Fahrzeug is already open
2025-11-12 13:24:15,870 - ispa_next.functions - DEBUG - fetch_customer_data
2025-11-12 13:24:15,926 - ispa_next.functions - DEBUG - fetch_customer_data_from_bmw_id
2025-11-12 13:24:17,235 - ispa_next.functions - DEBUG - All data found, skipping remaining sources
2025-11-12 13:24:17,437 - ispa_next.functions - DEBUG - copy_customer_data_to_appointment
2025-11-12 13:24:19,235 - ispa_next.functions - DEBUG - check_for_alpina_vehicle
2025-11-12 13:24:19,237 - ispa_next.functions - DEBUG - check_bmw_id_add_to_list
2025-11-12 13:24:19,848 - ispa_next.functions - DEBUG - check_home_dealer_add_to_list
2025-11-12 13:24:19,850 - ispa_next.common.shared - DEBUG - Attempting to open ISPA tab: Fahrzeugzustand
2025-11-12 13:24:20,527 - ispa_next.common.shared - DEBUG - Successfully opened ISPA tab: Fahrzeugzustand
2025-11-12 13:24:24,089 - ispa_next.rkr_manager.main - DEBUG - running RemoteKeyReadManager
2025-11-12 13:24:24,089 - ispa_next.rkr_manager.main - DEBUG - early exiting RemoteKeyReadManager - enabled=False or early_exit_enabled=True
2025-11-12 13:24:24,092 - ispa_next.functions - DEBUG - generate_attachments
2025-11-12 13:24:24,093 - ispa_next.functions - DEBUG - check_service_requirement
2025-11-12 13:24:24,093 - ispa_next.common.shared - DEBUG - Attempting to open ISPA tab: Wartung
2025-11-12 13:24:24,572 - ispa_next.common.shared - DEBUG - Successfully opened ISPA tab: Wartung
2025-11-12 13:24:28,675 - ispa_next.functions - DEBUG - check_service_requirement result: pdf_needed =False
2025-11-12 13:24:28,679 - ispa_next.wipers - DEBUG - handle_wiper_service_contracts
2025-11-12 13:24:28,679 - ispa_next.common.shared - DEBUG - Attempting to open ISPA tab: Wartung
2025-11-12 13:24:28,756 - ispa_next.common.shared - DEBUG - ISPA tab Wartung is already open
2025-11-12 13:24:34,453 - ispa_next.common.shared - DEBUG - Attempting to open ISPA tab: Kunden & Fahrzeug
2025-11-12 13:24:34,960 - ispa_next.common.shared - DEBUG - Successfully opened ISPA tab: Kunden & Fahrzeug
2025-11-12 13:24:34,962 - ispa_next.common.shared - DEBUG - Attempting to open ISPA tab: Wartung
2025-11-12 13:24:35,647 - ispa_next.common.shared - DEBUG - Successfully opened ISPA tab: Wartung
2025-11-12 13:24:35,648 - ispa_next.package_manager.main - DEBUG - updating cart content
2025-11-12 13:24:38,669 - ispa_next.package_manager.main - DEBUG - updating advice list content
2025-11-12 13:24:38,671 - ispa_next.package_manager.helper - DEBUG - get_advice_list_contents
2025-11-12 13:24:39,457 - ispa_next.package_manager.main - DEBUG - determining package movements
2025-11-12 13:24:39,459 - ispa_next.package_manager.main - DEBUG - determining packages to place
2025-11-12 13:24:39,460 - ispa_next.package_manager.main - DEBUG - Cannot place Beide Bremsscheiben hinten aus- und einbauen/erset: placement requirements not met
2025-11-12 13:24:39,461 - ispa_next.package_manager.main - DEBUG - Cannot place Beide Bremsscheiben vorn aus- und einbauen/ersetze: placement requirements not met
2025-11-12 13:24:39,462 - ispa_next.package_manager.main - DEBUG - found packages to cart: set()
2025-11-12 13:24:39,463 - ispa_next.package_manager.main - DEBUG - determining packages to place
2025-11-12 13:24:39,467 - ispa_next.package_manager.main - DEBUG - Cannot place Ladewunsch und Ladezustand: not present in source
2025-11-12 13:24:39,469 - ispa_next.package_manager.main - DEBUG - found packages to advice_list: set()
2025-11-12 13:24:39,473 - ispa_next.package_manager.main - DEBUG - determining package to delete
2025-11-12 13:24:39,475 - ispa_next.package_manager.main - DEBUG - found packages to delete: set()
2025-11-12 13:24:39,478 - ispa_next.package_manager.main - DEBUG - determining package to update
2025-11-12 13:24:39,480 - ispa_next.package_manager.main - DEBUG - found packages to update: set()
2025-11-12 13:24:39,482 - ispa_next.functions - DEBUG - verify_cart_packages_additional_texts
2025-11-12 13:24:39,482 - ispa_next.functions - DEBUG - check_cart_for_additional_text_packages
2025-11-12 13:24:39,482 - ispa_next.functions - DEBUG - get_cart_contents
2025-11-12 13:24:42,745 - ispa_next.functions - DEBUG - handle_mobility_replacement
2025-11-12 13:24:42,745 - ispa_next.functions - DEBUG - verify_battery_in_motoroil_package
2025-11-12 13:24:42,751 - ispa_next.functions - DEBUG - get_cart_contents
2025-11-12 13:24:46,072 - ispa_next.functions - DEBUG - verify_breaks_in_break_package
2025-11-12 13:24:46,072 - ispa_next.functions - DEBUG - verify breaks added if breaks service in cart
2025-11-12 13:24:46,074 - ispa_next.functions - DEBUG - get_cart_contents
2025-11-12 13:24:49,289 - ispa_next.functions - DEBUG - process_check_control
2025-11-12 13:24:49,290 - ispa_next.common.shared - DEBUG - Attempting to open ISPA tab: Beanstandungen
2025-11-12 13:24:49,990 - ispa_next.common.shared - DEBUG - Successfully opened ISPA tab: Beanstandungen
2025-11-12 13:24:50,072 - ispa_next.functions - DEBUG - get_cart_contents
2025-11-12 13:24:54,815 - ispa_next.functions - DEBUG - trying add_material_to_package
2025-11-12 13:24:54,819 - ispa_next.functions - DEBUG - get_cart_contents
2025-11-12 13:24:58,074 - ispa_next.functions - DEBUG - notify_aw_increase_to_service_advisor
2025-11-12 13:25:07,073 - ispa_next.functions - DEBUG - check_cart_packages_for_parts_service_and_parts_availability
2025-11-12 13:25:07,516 - ispa_next.common.shared - DEBUG - Attempting to open ISPA tab: Abschluss
2025-11-12 13:25:07,975 - ispa_next.common.shared - DEBUG - Successfully opened ISPA tab: Abschluss
2025-11-12 13:25:08,105 - ispa_next.functions - DEBUG - get_cart_contents
2025-11-12 13:25:18,517 - ispa_next.appointment_ending - DEBUG - entered complete process
2025-11-12 13:25:18,519 - ispa_next.appointment_loop.helpers - DEBUG - Checking for potential OIDC Login dialog
2025-11-12 13:25:19,004 - ispa_next.common.shared - DEBUG - Attempting to open ISPA tab: Abschluss
2025-11-12 13:25:19,080 - ispa_next.common.shared - DEBUG - ISPA tab Abschluss is already open
2025-11-12 13:25:19,081 - ispa_next.appointment_ending - DEBUG - complete_process isn't exiting early.
2025-11-12 13:25:21,474 - ispa_next.appointment_ending - DEBUG - Service parts target assigned before process exit.
2025-11-12 13:25:33,280 - ispa_next.appointment_ending - DEBUG - return from complete process straight to process_list with saving without error_dialog.
2025-11-12 13:25:33,670 - ispa_next.appointment_loop.main - DEBUG - Closing appointment 1.
2025-11-12 13:25:34,437 - ispa_next.appointments.functions - DEBUG - filter_appointments_grid_by_term
2025-11-12 13:25:35,039 - ispa_next.appointments.functions - DEBUG - Gross total count for all events at location: 193
2025-11-12 13:25:35,041 - ispa_next.appointments.functions - DEBUG - Unfiltered total count for 'Terminvereinbarung' events: 1
2025-11-12 13:25:37,823 - ispa_next.appointments.functions - DEBUG - Filtered by term total count for 'Terminvereinbarung' events: 80
2025-11-12 13:25:37,823 - ispa_next.appointments.functions - DEBUG - fetch_appointments_from_grid
2025-11-12 13:25:38,608 - ispa_next.main - DEBUG - 



2025-11-12 13:25:38,608 - ispa_next.main - DEBUG - starting with process 2 (TS-MV 266 E) of 3
2025-11-12 13:25:38,612 - ispa_next.appointment_loop.helpers - DEBUG - Checking for potential OIDC Login dialog
2025-11-12 13:25:39,696 - ispa_next.appointments.functions - DEBUG - filter_appointments_grid_by_term
2025-11-12 13:25:40,691 - ispa_next.appointments.functions - DEBUG - Gross total count for all events at location: 193
2025-11-12 13:25:40,693 - ispa_next.appointments.functions - DEBUG - Unfiltered total count for 'Terminvereinbarung' events: 80
2025-11-12 13:25:41,951 - ispa_next.appointments.functions - DEBUG - Filtered by term total count for 'Terminvereinbarung' events: 1
2025-11-12 13:25:41,952 - ispa_next.appointments.functions - DEBUG - fetch_appointments_from_grid
2025-11-12 13:26:04,502 - ispa_next.rkr_manager.main - DEBUG - RemoteKeyReadManager initialized
2025-11-12 13:26:06,268 - ispa_next.appointments.functions - DEBUG - Appointment was already processed in the past.
2025-11-12 13:26:11,102 - ispa_next.functions - DEBUG - get_cart_contents
2025-11-12 13:26:14,329 - ispa_next.functions - DEBUG - check_and_verify_hu_date
2025-11-12 13:26:14,331 - ispa_next.common.shared - DEBUG - Attempting to open ISPA tab: Kunden & Fahrzeug
2025-11-12 13:26:14,422 - ispa_next.common.shared - DEBUG - ISPA tab Kunden & Fahrzeug is already open
2025-11-12 13:26:14,577 - ispa_next.functions - DEBUG - HU date is not available.
2025-11-12 13:26:18,105 - ispa_next.functions - DEBUG - check_potential_workshop_test
2025-11-12 13:26:18,107 - ispa_next.functions - DEBUG - check_vehicle_age_for_service_plus
2025-11-12 13:26:18,109 - ispa_next.common.shared - DEBUG - Attempting to open ISPA tab: Kunden & Fahrzeug
2025-11-12 13:26:18,200 - ispa_next.common.shared - DEBUG - ISPA tab Kunden & Fahrzeug is already open
2025-11-12 13:26:21,350 - ispa_next.rkr_manager.main - DEBUG - running RemoteKeyReadManager
2025-11-12 13:26:21,351 - ispa_next.common.shared - DEBUG - Attempting to open ISPA tab: Wartung
2025-11-12 13:26:22,159 - ispa_next.common.shared - DEBUG - Successfully opened ISPA tab: Wartung
2025-11-12 13:26:24,170 - ispa_next.rkr_manager.state - DEBUG - Entering initial state
2025-11-12 13:26:24,273 - ispa_next.rkr_manager.state - DEBUG - Checking customer consent
2025-11-12 13:26:24,349 - ispa_next.rkr_manager.state - DEBUG - Checking data freshness
2025-11-12 13:26:24,428 - ispa_next.rkr_manager.state - DEBUG - Checking color in CBS positions
2025-11-12 13:26:28,647 - ispa_next.rkr_manager.state - DEBUG - State machine completed with reason: data_still_good
2025-11-12 13:26:29,651 - ispa_next.functions - DEBUG - handle_data_privacy_consent
2025-11-12 13:26:29,653 - ispa_next.common.shared - DEBUG - Attempting to open ISPA tab: Kunden & Fahrzeug
2025-11-12 13:26:30,132 - ispa_next.common.shared - DEBUG - Successfully opened ISPA tab: Kunden & Fahrzeug
2025-11-12 13:26:40,923 - ispa_next.functions - DEBUG - DSE icon is yellow
2025-11-12 13:26:44,138 - ispa_next.functions - DEBUG - transfer_customer_data_to_appointment
2025-11-12 13:26:44,140 - ispa_next.common.shared - DEBUG - Attempting to open ISPA tab: Kunden & Fahrzeug
2025-11-12 13:26:44,239 - ispa_next.common.shared - DEBUG - ISPA tab Kunden & Fahrzeug is already open
2025-11-12 13:26:44,240 - ispa_next.functions - DEBUG - fetch_customer_data
2025-11-12 13:26:44,267 - ispa_next.functions - DEBUG - fetch_customer_data_from_bmw_id
2025-11-12 13:26:45,390 - ispa_next.functions - DEBUG - fetch_customer_data_from_dms
2025-11-12 13:26:46,616 - ispa_next.functions - DEBUG - All data found, skipping remaining sources
2025-11-12 13:26:46,814 - ispa_next.functions - DEBUG - copy_customer_data_to_appointment
2025-11-12 13:26:48,389 - ispa_next.functions - DEBUG - Updated appointment (AJ00018011) customer contact data.
2025-11-12 13:26:49,327 - ispa_next.functions - DEBUG - check_for_alpina_vehicle
2025-11-12 13:26:49,327 - ispa_next.functions - DEBUG - check_bmw_id_add_to_list
2025-11-12 13:26:49,818 - ispa_next.functions - DEBUG - check_home_dealer_add_to_list
2025-11-12 13:26:49,820 - ispa_next.common.shared - DEBUG - Attempting to open ISPA tab: Fahrzeugzustand
2025-11-12 13:26:50,502 - ispa_next.common.shared - DEBUG - Successfully opened ISPA tab: Fahrzeugzustand
2025-11-12 13:26:54,508 - ispa_next.rkr_manager.main - DEBUG - running RemoteKeyReadManager
2025-11-12 13:26:54,508 - ispa_next.rkr_manager.main - DEBUG - early exiting RemoteKeyReadManager - enabled=False or early_exit_enabled=True
2025-11-12 13:26:54,511 - ispa_next.functions - DEBUG - generate_attachments
2025-11-12 13:26:54,511 - ispa_next.functions - DEBUG - check_service_requirement
2025-11-12 13:26:54,512 - ispa_next.common.shared - DEBUG - Attempting to open ISPA tab: Wartung
2025-11-12 13:26:55,078 - ispa_next.common.shared - DEBUG - Successfully opened ISPA tab: Wartung
2025-11-12 13:26:59,191 - ispa_next.functions - DEBUG - check_service_requirement result: pdf_needed =False
2025-11-12 13:26:59,193 - ispa_next.wipers - DEBUG - handle_wiper_service_contracts
2025-11-12 13:26:59,195 - ispa_next.common.shared - DEBUG - Attempting to open ISPA tab: Wartung
2025-11-12 13:26:59,277 - ispa_next.common.shared - DEBUG - ISPA tab Wartung is already open
2025-11-12 13:27:04,924 - ispa_next.common.shared - DEBUG - Attempting to open ISPA tab: Kunden & Fahrzeug
2025-11-12 13:27:05,706 - ispa_next.common.shared - DEBUG - Successfully opened ISPA tab: Kunden & Fahrzeug
2025-11-12 13:27:05,706 - ispa_next.common.shared - DEBUG - Attempting to open ISPA tab: Wartung
2025-11-12 13:27:06,474 - ispa_next.common.shared - DEBUG - Successfully opened ISPA tab: Wartung
2025-11-12 13:27:06,476 - ispa_next.package_manager.main - DEBUG - updating cart content
2025-11-12 13:27:09,505 - ispa_next.package_manager.main - DEBUG - updating advice list content
2025-11-12 13:27:09,507 - ispa_next.package_manager.helper - DEBUG - get_advice_list_contents
2025-11-12 13:27:11,253 - ispa_next.package_manager.main - DEBUG - determining package movements
2025-11-12 13:27:11,255 - ispa_next.package_manager.main - DEBUG - determining packages to place
2025-11-12 13:27:11,257 - ispa_next.package_manager.main - DEBUG - Cannot place Beide Bremsscheiben hinten aus- und einbauen/erset: placement requirements not met
2025-11-12 13:27:11,259 - ispa_next.package_manager.main - DEBUG - Cannot place Beide Bremsscheiben vorn aus- und einbauen/ersetze: placement requirements not met
2025-11-12 13:27:11,259 - ispa_next.package_manager.main - DEBUG - found packages to cart: set()
2025-11-12 13:27:11,261 - ispa_next.package_manager.main - DEBUG - determining packages to place
2025-11-12 13:27:11,261 - ispa_next.package_manager.main - DEBUG - found packages to advice_list: set()
2025-11-12 13:27:11,263 - ispa_next.package_manager.main - DEBUG - determining package to delete
2025-11-12 13:27:11,265 - ispa_next.package_manager.main - DEBUG - found packages to delete: set()
2025-11-12 13:27:11,265 - ispa_next.package_manager.main - DEBUG - determining package to update
2025-11-12 13:27:11,267 - ispa_next.package_manager.main - DEBUG - found packages to update: set()
2025-11-12 13:27:11,269 - ispa_next.functions - DEBUG - verify_cart_packages_additional_texts
2025-11-12 13:27:11,271 - ispa_next.functions - DEBUG - check_cart_for_additional_text_packages
2025-11-12 13:27:11,271 - ispa_next.functions - DEBUG - get_cart_contents
2025-11-12 13:27:14,581 - ispa_next.functions - DEBUG - handle_mobility_replacement
2025-11-12 13:27:14,582 - ispa_next.functions - DEBUG - verify_battery_in_motoroil_package
2025-11-12 13:27:14,585 - ispa_next.functions - DEBUG - get_cart_contents
2025-11-12 13:27:17,807 - ispa_next.functions - DEBUG - verify_breaks_in_break_package
2025-11-12 13:27:17,807 - ispa_next.functions - DEBUG - verify breaks added if breaks service in cart
2025-11-12 13:27:17,815 - ispa_next.functions - DEBUG - get_cart_contents
2025-11-12 13:27:21,062 - ispa_next.functions - DEBUG - process_check_control
2025-11-12 13:27:21,064 - ispa_next.common.shared - DEBUG - Attempting to open ISPA tab: Beanstandungen
2025-11-12 13:27:21,734 - ispa_next.common.shared - DEBUG - Successfully opened ISPA tab: Beanstandungen
2025-11-12 13:27:21,980 - ispa_next.functions - DEBUG - get_cart_contents
2025-11-12 13:27:37,547 - ispa_next.functions - DEBUG - trying add_material_to_package
2025-11-12 13:27:37,548 - ispa_next.functions - DEBUG - get_cart_contents
2025-11-12 13:27:40,854 - ispa_next.functions - DEBUG - notify_aw_increase_to_service_advisor
2025-11-12 13:27:51,719 - ispa_next.functions - DEBUG - check_cart_packages_for_parts_service_and_parts_availability
2025-11-12 13:27:52,202 - ispa_next.common.shared - DEBUG - Attempting to open ISPA tab: Abschluss
2025-11-12 13:27:52,730 - ispa_next.common.shared - DEBUG - Successfully opened ISPA tab: Abschluss
2025-11-12 13:27:52,844 - ispa_next.functions - DEBUG - get_cart_contents
2025-11-12 13:28:24,020 - ispa_next.functions - DEBUG - Sucessfully closed JobDetailsView.
2025-11-12 13:28:27,301 - ispa_next.functions - DEBUG - Sucessfully closed JobDetailsView.
2025-11-12 13:28:30,553 - ispa_next.functions - DEBUG - Sucessfully closed JobDetailsView.
2025-11-12 13:28:34,553 - ispa_next.functions - DEBUG - Sucessfully closed JobDetailsView.
2025-11-12 13:28:34,555 - ispa_next.appointment_ending - DEBUG - entered complete process
2025-11-12 13:28:34,555 - ispa_next.appointment_loop.helpers - DEBUG - Checking for potential OIDC Login dialog
2025-11-12 13:28:35,059 - ispa_next.common.shared - DEBUG - Attempting to open ISPA tab: Abschluss
2025-11-12 13:28:35,125 - ispa_next.common.shared - DEBUG - ISPA tab Abschluss is already open
2025-11-12 13:28:35,125 - ispa_next.appointment_ending - DEBUG - complete_process isn't exiting early.
2025-11-12 13:28:36,704 - ispa_next.appointment_ending - DEBUG - No need to assign service parts target.
2025-11-12 13:28:47,661 - ispa_next.appointment_ending - DEBUG - return from complete process straight to process_list with saving without error_dialog.
2025-11-12 13:28:48,044 - ispa_next.appointment_loop.main - DEBUG - Closing appointment 2.
2025-11-12 13:28:48,302 - ispa_next.appointments.functions - DEBUG - filter_appointments_grid_by_term
2025-11-12 13:28:49,105 - ispa_next.appointments.functions - DEBUG - Gross total count for all events at location: 193
2025-11-12 13:28:49,107 - ispa_next.appointments.functions - DEBUG - Unfiltered total count for 'Terminvereinbarung' events: 1
2025-11-12 13:28:52,150 - ispa_next.appointments.functions - DEBUG - Filtered by term total count for 'Terminvereinbarung' events: 80
2025-11-12 13:28:52,150 - ispa_next.appointments.functions - DEBUG - fetch_appointments_from_grid
2025-11-12 13:28:52,978 - ispa_next.main - DEBUG - 



2025-11-12 13:28:52,978 - ispa_next.main - DEBUG - starting with process 3 (TS-SU 348) of 3
2025-11-12 13:28:52,982 - ispa_next.appointment_loop.helpers - DEBUG - Checking for potential OIDC Login dialog
2025-11-12 13:28:54,075 - ispa_next.appointments.functions - DEBUG - filter_appointments_grid_by_term
2025-11-12 13:28:55,230 - ispa_next.appointments.functions - DEBUG - Gross total count for all events at location: 193
2025-11-12 13:28:55,231 - ispa_next.appointments.functions - DEBUG - Unfiltered total count for 'Terminvereinbarung' events: 80
2025-11-12 13:28:56,545 - ispa_next.appointments.functions - DEBUG - Filtered by term total count for 'Terminvereinbarung' events: 1
2025-11-12 13:28:56,546 - ispa_next.appointments.functions - DEBUG - fetch_appointments_from_grid
2025-11-12 13:29:25,891 - ispa_next.rkr_manager.main - DEBUG - RemoteKeyReadManager initialized
2025-11-12 13:29:27,663 - ispa_next.appointments.functions - DEBUG - Appointment was already processed in the past.
2025-11-12 13:29:32,459 - ispa_next.functions - DEBUG - get_cart_contents
2025-11-12 13:29:34,351 - ispa_next.functions - DEBUG - check_and_verify_hu_date
2025-11-12 13:29:34,352 - ispa_next.common.shared - DEBUG - Attempting to open ISPA tab: Kunden & Fahrzeug
2025-11-12 13:29:34,445 - ispa_next.common.shared - DEBUG - ISPA tab Kunden & Fahrzeug is already open
2025-11-12 13:29:34,662 - ispa_next.functions - DEBUG - check_potential_workshop_test
2025-11-12 13:29:34,664 - ispa_next.functions - DEBUG - check_vehicle_age_for_service_plus
2025-11-12 13:29:34,664 - ispa_next.common.shared - DEBUG - Attempting to open ISPA tab: Kunden & Fahrzeug
2025-11-12 13:29:34,757 - ispa_next.common.shared - DEBUG - ISPA tab Kunden & Fahrzeug is already open
2025-11-12 13:29:37,969 - ispa_next.rkr_manager.main - DEBUG - running RemoteKeyReadManager
2025-11-12 13:29:37,971 - ispa_next.common.shared - DEBUG - Attempting to open ISPA tab: Wartung
2025-11-12 13:29:38,969 - ispa_next.common.shared - DEBUG - Successfully opened ISPA tab: Wartung
2025-11-12 13:29:40,973 - ispa_next.rkr_manager.state - DEBUG - Entering initial state
2025-11-12 13:29:41,067 - ispa_next.rkr_manager.state - DEBUG - Checking customer consent
2025-11-12 13:29:41,140 - ispa_next.rkr_manager.state - DEBUG - Checking data freshness
2025-11-12 13:29:41,208 - ispa_next.rkr_manager.state - DEBUG - Checking color in CBS positions
2025-11-12 13:29:45,362 - ispa_next.rkr_manager.state - DEBUG - State machine completed with reason: data_still_good
2025-11-12 13:29:46,366 - ispa_next.functions - DEBUG - handle_data_privacy_consent
2025-11-12 13:29:46,380 - ispa_next.common.shared - DEBUG - Attempting to open ISPA tab: Kunden & Fahrzeug
2025-11-12 13:29:46,876 - ispa_next.common.shared - DEBUG - Successfully opened ISPA tab: Kunden & Fahrzeug
2025-11-12 13:29:57,846 - ispa_next.functions - DEBUG - DSE icon is yellow
2025-11-12 13:29:57,846 - ispa_next.functions - DEBUG - DSE dealer channels are valid
2025-11-12 13:30:01,562 - ispa_next.functions - DEBUG - transfer_customer_data_to_appointment
2025-11-12 13:30:01,564 - ispa_next.common.shared - DEBUG - Attempting to open ISPA tab: Kunden & Fahrzeug
2025-11-12 13:30:01,670 - ispa_next.common.shared - DEBUG - ISPA tab Kunden & Fahrzeug is already open
2025-11-12 13:30:01,672 - ispa_next.functions - DEBUG - fetch_customer_data
2025-11-12 13:30:01,712 - ispa_next.functions - DEBUG - fetch_customer_data_from_bmw_id
2025-11-12 13:30:02,952 - ispa_next.functions - DEBUG - All data found, skipping remaining sources
2025-11-12 13:30:03,154 - ispa_next.functions - DEBUG - copy_customer_data_to_appointment
2025-11-12 13:30:05,001 - ispa_next.functions - DEBUG - Updated appointment (AJ00018087) customer contact data.
2025-11-12 13:30:05,920 - ispa_next.functions - DEBUG - check_for_alpina_vehicle
2025-11-12 13:30:05,921 - ispa_next.functions - DEBUG - check_bmw_id_add_to_list
2025-11-12 13:30:06,672 - ispa_next.functions - DEBUG - check_home_dealer_add_to_list
2025-11-12 13:30:06,673 - ispa_next.common.shared - DEBUG - Attempting to open ISPA tab: Fahrzeugzustand
2025-11-12 13:30:07,450 - ispa_next.common.shared - DEBUG - Successfully opened ISPA tab: Fahrzeugzustand
2025-11-12 13:30:11,024 - ispa_next.rkr_manager.main - DEBUG - running RemoteKeyReadManager
2025-11-12 13:30:11,024 - ispa_next.rkr_manager.main - DEBUG - early exiting RemoteKeyReadManager - enabled=False or early_exit_enabled=True
2025-11-12 13:30:11,036 - ispa_next.functions - DEBUG - generate_attachments
2025-11-12 13:30:11,038 - ispa_next.functions - DEBUG - check_service_requirement
2025-11-12 13:30:11,038 - ispa_next.common.shared - DEBUG - Attempting to open ISPA tab: Wartung
2025-11-12 13:30:11,530 - ispa_next.common.shared - DEBUG - Successfully opened ISPA tab: Wartung
2025-11-12 13:30:15,643 - ispa_next.functions - DEBUG - check_service_requirement result: pdf_needed =False
2025-11-12 13:30:15,646 - ispa_next.wipers - DEBUG - handle_wiper_service_contracts
2025-11-12 13:30:15,648 - ispa_next.common.shared - DEBUG - Attempting to open ISPA tab: Wartung
2025-11-12 13:30:15,734 - ispa_next.common.shared - DEBUG - ISPA tab Wartung is already open
2025-11-12 13:30:24,801 - ispa_next.common.shared - DEBUG - Attempting to open ISPA tab: Kunden & Fahrzeug
2025-11-12 13:30:25,344 - ispa_next.common.shared - DEBUG - Successfully opened ISPA tab: Kunden & Fahrzeug
2025-11-12 13:30:25,344 - ispa_next.common.shared - DEBUG - Attempting to open ISPA tab: Wartung
2025-11-12 13:30:26,061 - ispa_next.common.shared - DEBUG - Successfully opened ISPA tab: Wartung
2025-11-12 13:30:26,062 - ispa_next.package_manager.main - DEBUG - updating cart content
2025-11-12 13:30:27,913 - ispa_next.package_manager.main - DEBUG - updating advice list content
2025-11-12 13:30:27,915 - ispa_next.package_manager.helper - DEBUG - get_advice_list_contents
2025-11-12 13:30:29,553 - ispa_next.package_manager.main - DEBUG - determining package movements
2025-11-12 13:30:29,558 - ispa_next.package_manager.main - DEBUG - determining packages to place
2025-11-12 13:30:29,561 - ispa_next.package_manager.main - DEBUG - Cannot place Beide Bremsscheiben hinten aus- und einbauen/erset: placement requirements not met
2025-11-12 13:30:29,563 - ispa_next.package_manager.main - DEBUG - Cannot place Beide Bremsscheiben vorn aus- und einbauen/ersetze: placement requirements not met
2025-11-12 13:30:29,566 - ispa_next.package_manager.main - DEBUG - found packages to cart: set()
2025-11-12 13:30:29,567 - ispa_next.package_manager.main - DEBUG - determining packages to place
2025-11-12 13:30:29,569 - ispa_next.package_manager.main - DEBUG - Cannot place Ladewunsch und Ladezustand: not present in source
2025-11-12 13:30:29,569 - ispa_next.package_manager.main - DEBUG - found packages to advice_list: set()
2025-11-12 13:30:29,570 - ispa_next.package_manager.main - DEBUG - determining package to delete
2025-11-12 13:30:29,572 - ispa_next.package_manager.main - DEBUG - found packages to delete: set()
2025-11-12 13:30:29,573 - ispa_next.package_manager.main - DEBUG - determining package to update
2025-11-12 13:30:29,574 - ispa_next.package_manager.main - DEBUG - found packages to update: set()
2025-11-12 13:30:29,576 - ispa_next.functions - DEBUG - verify_cart_packages_additional_texts
2025-11-12 13:30:29,578 - ispa_next.functions - DEBUG - check_cart_for_additional_text_packages
2025-11-12 13:30:29,578 - ispa_next.functions - DEBUG - get_cart_contents
2025-11-12 13:30:31,501 - ispa_next.functions - DEBUG - handle_mobility_replacement
2025-11-12 13:30:31,502 - ispa_next.functions - DEBUG - verify_battery_in_motoroil_package
2025-11-12 13:30:31,505 - ispa_next.functions - DEBUG - get_cart_contents
2025-11-12 13:30:33,370 - ispa_next.functions - DEBUG - verify_breaks_in_break_package
2025-11-12 13:30:33,370 - ispa_next.functions - DEBUG - verify breaks added if breaks service in cart
2025-11-12 13:30:33,376 - ispa_next.functions - DEBUG - get_cart_contents
2025-11-12 13:30:35,266 - ispa_next.functions - DEBUG - process_check_control
2025-11-12 13:30:35,267 - ispa_next.common.shared - DEBUG - Attempting to open ISPA tab: Beanstandungen
2025-11-12 13:30:35,983 - ispa_next.common.shared - DEBUG - Successfully opened ISPA tab: Beanstandungen
2025-11-12 13:30:36,273 - ispa_next.functions - DEBUG - get_cart_contents
2025-11-12 13:30:50,258 - ispa_next.functions - DEBUG - trying add_material_to_package
2025-11-12 13:30:50,259 - ispa_next.functions - DEBUG - get_cart_contents
2025-11-12 13:30:52,190 - ispa_next.functions - DEBUG - notify_aw_increase_to_service_advisor
2025-11-12 13:31:03,078 - ispa_next.functions - DEBUG - check_cart_packages_for_parts_service_and_parts_availability
2025-11-12 13:31:03,574 - ispa_next.common.shared - DEBUG - Attempting to open ISPA tab: Abschluss
2025-11-12 13:31:04,138 - ispa_next.common.shared - DEBUG - Successfully opened ISPA tab: Abschluss
2025-11-12 13:31:04,298 - ispa_next.functions - DEBUG - get_cart_contents
2025-11-12 13:31:21,885 - ispa_next.functions - DEBUG - Sucessfully closed JobDetailsView.
2025-11-12 13:31:25,987 - ispa_next.functions - DEBUG - Sucessfully closed JobDetailsView.
2025-11-12 13:31:25,989 - ispa_next.appointment_ending - DEBUG - entered complete process
2025-11-12 13:31:25,989 - ispa_next.appointment_loop.helpers - DEBUG - Checking for potential OIDC Login dialog
2025-11-12 13:31:26,495 - ispa_next.common.shared - DEBUG - Attempting to open ISPA tab: Abschluss
2025-11-12 13:31:26,562 - ispa_next.common.shared - DEBUG - ISPA tab Abschluss is already open
2025-11-12 13:31:26,563 - ispa_next.appointment_ending - DEBUG - complete_process isn't exiting early.
2025-11-12 13:31:28,181 - ispa_next.appointment_ending - DEBUG - No need to assign service parts target.
2025-11-12 13:31:35,265 - ispa_next.appointment_ending - DEBUG - return from complete process straight to process_list with saving without error_dialog.
2025-11-12 13:31:35,637 - ispa_next.appointment_loop.main - DEBUG - Closing appointment 3.
2025-11-12 13:31:36,371 - ispa_next.appointments.functions - DEBUG - filter_appointments_grid_by_term
2025-11-12 13:31:36,984 - ispa_next.appointments.functions - DEBUG - Gross total count for all events at location: 193
2025-11-12 13:31:36,985 - ispa_next.appointments.functions - DEBUG - Unfiltered total count for 'Terminvereinbarung' events: 1
2025-11-12 13:31:39,630 - ispa_next.appointments.functions - DEBUG - Filtered by term total count for 'Terminvereinbarung' events: 80
2025-11-12 13:31:39,631 - ispa_next.appointments.functions - DEBUG - fetch_appointments_from_grid
