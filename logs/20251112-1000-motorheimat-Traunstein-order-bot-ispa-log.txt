2025-11-12 10:14:34,545 - ispa_next.main - DEBUG - ISPA Next attempt (1 / 5)
2025-11-12 10:14:34,552 - overlays.client - INFO - Connected to overlay manager pipe
2025-11-12 10:14:43,560 - ispa_next.app_start.functions - DEBUG - handle_update_available
2025-11-12 10:14:54,643 - ispa_next.app_start.functions - DEBUG - has_ispa_errors
2025-11-12 10:15:10,438 - ispa_next.app_start.functions - DEBUG - authenticate_user
2025-11-12 10:15:43,831 - ispa_next.app_start.main - DEBUG - Login successful
2025-11-12 10:16:00,160 - ispa_next.appointments.functions - DEBUG - order_appointments_grid_by_created_at
2025-11-12 10:16:03,125 - ispa_next.appointments.functions - DEBUG - filter_appointments_grid_by_term
2025-11-12 10:16:04,374 - ispa_next.appointments.functions - DEBUG - Gross total count for all events at location: 320
2025-11-12 10:16:04,375 - ispa_next.appointments.functions - DEBUG - Unfiltered total count for 'Terminvereinbarung' events: 101
2025-11-12 10:16:06,448 - ispa_next.appointments.functions - DEBUG - Filtered by term total count for 'Terminvereinbarung' events: 86
2025-11-12 10:16:06,449 - ispa_next.appointments.functions - DEBUG - recover_or_exit_IPS_error
2025-11-12 10:16:06,449 - ispa_next.appointments.functions - DEBUG - check_appointments_grid_for_IPS_error
2025-11-12 10:16:07,274 - ispa_next.appointments.functions - DEBUG - check_appointments_grid_for_IPS_error
2025-11-12 10:16:08,586 - ispa_next.appointments.functions - DEBUG - fetch_appointments_from_grid
2025-11-12 10:16:20,783 - ispa_next.appointments.models - DEBUG - Appointment Andreas Ponemunski Herr TS-A 1564 WBA71AG050CF97572 ohne Termin.
2025-11-12 10:16:20,799 - ispa_next.appointments.models - DEBUG - Appointment Heiko Lange Herr K-HL 1707 WBAUB51060VJ06122 ohne Termin.
2025-11-12 10:16:20,807 - ispa_next.appointments.models - DEBUG - Appointment Fabian Landler Herr TS-FL 440 WBA11AR0X0CM30916 ohne Termin.
2025-11-12 10:16:20,814 - ispa_next.appointments.models - DEBUG - Appointment Bianca Nadine Böhme Frau TS-BM 6120 WBA8G31070K880825 ohne Termin.
2025-11-12 10:16:20,821 - ispa_next.appointments.models - DEBUG - Appointment Elke Brabsche Frau TS-EB 205 WBA21GW0X0CR83934 ohne Termin.
2025-11-12 10:16:20,830 - ispa_next.main - DEBUG - Found 4 out of 9 appointments to process (configured limit: 15).
2025-11-12 10:16:20,830 - ispa_next.main - DEBUG - Processing 3 fresh appointments.
2025-11-12 10:16:20,830 - ispa_next.main - DEBUG - Processing 1 already visited appointments (w/ RKR not callable).
2025-11-12 10:16:20,830 - ispa_next.main - DEBUG - All appointments: TS-FL 76 E, TS-GH 434, TS-KS 2005, TS-MP 207
2025-11-12 10:16:20,832 - ispa_next.main - DEBUG - 



2025-11-12 10:16:20,832 - ispa_next.main - DEBUG - starting with process 1 (TS-FL 76 E) of 4
2025-11-12 10:16:20,836 - ispa_next.appointment_loop.helpers - DEBUG - Checking for potential OIDC Login dialog
2025-11-12 10:16:21,644 - ispa_next.appointments.functions - DEBUG - filter_appointments_grid_by_term
2025-11-12 10:16:22,585 - ispa_next.appointments.functions - DEBUG - Gross total count for all events at location: 320
2025-11-12 10:16:22,586 - ispa_next.appointments.functions - DEBUG - Unfiltered total count for 'Terminvereinbarung' events: 86
2025-11-12 10:16:23,706 - ispa_next.appointments.functions - DEBUG - Filtered by term total count for 'Terminvereinbarung' events: 1
2025-11-12 10:16:23,707 - ispa_next.appointments.functions - DEBUG - fetch_appointments_from_grid
2025-11-12 10:16:48,475 - ispa_next.rkr_manager.main - DEBUG - RemoteKeyReadManager initialized
2025-11-12 10:16:57,755 - ispa_next.functions - DEBUG - get_cart_contents
2025-11-12 10:16:59,681 - ispa_next.functions - DEBUG - check_and_verify_hu_date
2025-11-12 10:16:59,682 - ispa_next.common.shared - DEBUG - Attempting to open ISPA tab: Kunden & Fahrzeug
2025-11-12 10:16:59,776 - ispa_next.common.shared - DEBUG - ISPA tab Kunden & Fahrzeug is already open
2025-11-12 10:17:00,078 - ispa_next.functions - DEBUG - check_potential_workshop_test
2025-11-12 10:17:00,081 - ispa_next.functions - DEBUG - check_vehicle_age_for_service_plus
2025-11-12 10:17:00,127 - ispa_next.common.shared - DEBUG - Attempting to open ISPA tab: Kunden & Fahrzeug
2025-11-12 10:17:00,216 - ispa_next.common.shared - DEBUG - ISPA tab Kunden & Fahrzeug is already open
2025-11-12 10:17:03,316 - ispa_next.rkr_manager.main - DEBUG - running RemoteKeyReadManager
2025-11-12 10:17:03,318 - ispa_next.common.shared - DEBUG - Attempting to open ISPA tab: Wartung
2025-11-12 10:17:04,231 - ispa_next.common.shared - DEBUG - Successfully opened ISPA tab: Wartung
2025-11-12 10:17:06,235 - ispa_next.rkr_manager.state - DEBUG - Entering initial state
2025-11-12 10:17:06,357 - ispa_next.rkr_manager.state - DEBUG - Checking customer consent
2025-11-12 10:17:06,456 - ispa_next.rkr_manager.state - DEBUG - Checking data freshness
2025-11-12 10:17:06,549 - ispa_next.rkr_manager.state - DEBUG - Getting cart and advice list contents
2025-11-12 10:17:06,550 - ispa_next.rkr_manager.state - DEBUG - Triggering remote key read
2025-11-12 10:17:17,918 - ispa_next.rkr_manager.helper - DEBUG - Found button 'Hinzufügen (Empfohlen)' in nested popup
2025-11-12 10:17:22,107 - ispa_next.rkr_manager.state - DEBUG - Checking cart items after successfull RKR
2025-11-12 10:17:22,107 - ispa_next.rkr_manager.state - DEBUG - Checking color in CBS positions
2025-11-12 10:17:26,305 - ispa_next.rkr_manager.state - DEBUG - State machine completed with reason: success
2025-11-12 10:17:27,310 - ispa_next.functions - DEBUG - handle_data_privacy_consent
2025-11-12 10:17:27,311 - ispa_next.common.shared - DEBUG - Attempting to open ISPA tab: Kunden & Fahrzeug
2025-11-12 10:17:27,842 - ispa_next.common.shared - DEBUG - Successfully opened ISPA tab: Kunden & Fahrzeug
2025-11-12 10:17:40,093 - ispa_next.functions - DEBUG - DSE icon is red
2025-11-12 10:17:46,705 - ispa_next.functions - DEBUG - transfer_customer_data_to_appointment
2025-11-12 10:17:46,707 - ispa_next.common.shared - DEBUG - Attempting to open ISPA tab: Kunden & Fahrzeug
2025-11-12 10:17:46,780 - ispa_next.common.shared - DEBUG - ISPA tab Kunden & Fahrzeug is already open
2025-11-12 10:17:46,781 - ispa_next.functions - DEBUG - fetch_customer_data
2025-11-12 10:17:46,819 - ispa_next.functions - DEBUG - fetch_customer_data_from_bmw_id
2025-11-12 10:17:48,019 - ispa_next.functions - DEBUG - All data found, skipping remaining sources
2025-11-12 10:17:48,265 - ispa_next.functions - DEBUG - copy_customer_data_to_appointment
2025-11-12 10:17:49,886 - ispa_next.functions - DEBUG - Updated appointment (AN00012770) customer contact data.
2025-11-12 10:17:50,786 - ispa_next.functions - DEBUG - check_for_alpina_vehicle
2025-11-12 10:17:50,787 - ispa_next.functions - DEBUG - check_bmw_id_add_to_list
2025-11-12 10:17:51,351 - ispa_next.functions - DEBUG - check_home_dealer_add_to_list
2025-11-12 10:17:51,352 - ispa_next.common.shared - DEBUG - Attempting to open ISPA tab: Fahrzeugzustand
2025-11-12 10:17:51,978 - ispa_next.common.shared - DEBUG - Successfully opened ISPA tab: Fahrzeugzustand
2025-11-12 10:17:55,561 - ispa_next.rkr_manager.main - DEBUG - running RemoteKeyReadManager
2025-11-12 10:17:55,561 - ispa_next.rkr_manager.main - DEBUG - early exiting RemoteKeyReadManager - enabled=False or early_exit_enabled=True
2025-11-12 10:17:55,565 - ispa_next.functions - DEBUG - generate_attachments
2025-11-12 10:17:55,566 - ispa_next.functions - DEBUG - check_service_requirement
2025-11-12 10:17:55,567 - ispa_next.common.shared - DEBUG - Attempting to open ISPA tab: Wartung
2025-11-12 10:17:56,042 - ispa_next.common.shared - DEBUG - Successfully opened ISPA tab: Wartung
2025-11-12 10:18:00,179 - ispa_next.functions - DEBUG - check_service_requirement result: pdf_needed =False
2025-11-12 10:18:00,182 - ispa_next.wipers - DEBUG - handle_wiper_service_contracts
2025-11-12 10:18:00,182 - ispa_next.common.shared - DEBUG - Attempting to open ISPA tab: Wartung
2025-11-12 10:18:00,261 - ispa_next.common.shared - DEBUG - ISPA tab Wartung is already open
2025-11-12 10:18:05,928 - ispa_next.common.shared - DEBUG - Attempting to open ISPA tab: Kunden & Fahrzeug
2025-11-12 10:18:06,457 - ispa_next.common.shared - DEBUG - Successfully opened ISPA tab: Kunden & Fahrzeug
2025-11-12 10:18:06,458 - ispa_next.common.shared - DEBUG - Attempting to open ISPA tab: Wartung
2025-11-12 10:18:07,129 - ispa_next.common.shared - DEBUG - Successfully opened ISPA tab: Wartung
2025-11-12 10:18:07,130 - ispa_next.package_manager.main - DEBUG - updating cart content
2025-11-12 10:18:09,074 - ispa_next.package_manager.main - DEBUG - updating advice list content
2025-11-12 10:18:09,077 - ispa_next.package_manager.helper - DEBUG - get_advice_list_contents
2025-11-12 10:18:09,917 - ispa_next.package_manager.main - DEBUG - determining package movements
2025-11-12 10:18:09,918 - ispa_next.package_manager.main - DEBUG - determining packages to place
2025-11-12 10:18:09,920 - ispa_next.package_manager.main - DEBUG - Cannot place Beide Bremsscheiben vorn aus- und einbauen/ersetze: placement requirements not met
2025-11-12 10:18:09,922 - ispa_next.package_manager.main - DEBUG - Cannot place Beide Bremsscheiben hinten aus- und einbauen/erset: placement requirements not met
2025-11-12 10:18:09,923 - ispa_next.package_manager.main - DEBUG - found packages to cart: {Package(name=Fußraum saugen, source=from_tab, target=cart)}
2025-11-12 10:18:09,924 - ispa_next.package_manager.main - DEBUG - determining packages to place
2025-11-12 10:18:09,927 - ispa_next.package_manager.main - DEBUG - Cannot place Ladewunsch und Ladezustand: not present in source
2025-11-12 10:18:09,928 - ispa_next.package_manager.main - DEBUG - found packages to advice_list: set()
2025-11-12 10:18:09,929 - ispa_next.package_manager.main - DEBUG - determining package to delete
2025-11-12 10:18:09,931 - ispa_next.package_manager.main - DEBUG - found packages to delete: set()
2025-11-12 10:18:09,932 - ispa_next.package_manager.main - DEBUG - determining package to update
2025-11-12 10:18:09,934 - ispa_next.package_manager.main - DEBUG - found packages to update: set()
2025-11-12 10:18:09,941 - ispa_next.package_manager.helper - DEBUG - add_to_cart called
2025-11-12 10:18:10,640 - ispa_next.common.shared - DEBUG - Attempting to open ISPA tab: Marketing
2025-11-12 10:18:11,289 - ispa_next.common.shared - DEBUG - Successfully opened ISPA tab: Marketing
2025-11-12 10:18:15,612 - ispa_next.package_manager.helper - DEBUG - _add_to_container_manual
2025-11-12 10:18:15,613 - ispa_next.functions - DEBUG - verify_cart_packages_additional_texts
2025-11-12 10:18:15,615 - ispa_next.functions - DEBUG - check_cart_for_additional_text_packages
2025-11-12 10:18:15,616 - ispa_next.functions - DEBUG - get_cart_contents
2025-11-12 10:18:18,197 - ispa_next.functions - DEBUG - handle_mobility_replacement
2025-11-12 10:18:18,198 - ispa_next.functions - DEBUG - verify_battery_in_motoroil_package
2025-11-12 10:18:18,200 - ispa_next.functions - DEBUG - get_cart_contents
2025-11-12 10:18:20,788 - ispa_next.functions - DEBUG - verify_breaks_in_break_package
2025-11-12 10:18:20,788 - ispa_next.functions - DEBUG - verify breaks added if breaks service in cart
2025-11-12 10:18:20,790 - ispa_next.functions - DEBUG - get_cart_contents
2025-11-12 10:18:23,311 - ispa_next.functions - DEBUG - process_check_control
2025-11-12 10:18:23,311 - ispa_next.common.shared - DEBUG - Attempting to open ISPA tab: Beanstandungen
2025-11-12 10:18:23,786 - ispa_next.common.shared - DEBUG - Successfully opened ISPA tab: Beanstandungen
2025-11-12 10:18:24,032 - ispa_next.functions - DEBUG - get_cart_contents
2025-11-12 10:18:33,832 - ispa_next.functions - DEBUG - trying add_material_to_package
2025-11-12 10:18:33,833 - ispa_next.functions - DEBUG - get_cart_contents
2025-11-12 10:18:36,444 - ispa_next.functions - DEBUG - notify_aw_increase_to_service_advisor
2025-11-12 10:18:46,863 - ispa_next.functions - DEBUG - check_cart_packages_for_parts_service_and_parts_availability
2025-11-12 10:18:47,330 - ispa_next.common.shared - DEBUG - Attempting to open ISPA tab: Abschluss
2025-11-12 10:18:47,862 - ispa_next.common.shared - DEBUG - Successfully opened ISPA tab: Abschluss
2025-11-12 10:18:48,108 - ispa_next.functions - DEBUG - get_cart_contents
2025-11-12 10:19:12,794 - ispa_next.functions - DEBUG - Sucessfully closed JobDetailsView.
2025-11-12 10:19:16,339 - ispa_next.functions - DEBUG - Sucessfully closed JobDetailsView.
2025-11-12 10:19:20,443 - ispa_next.functions - DEBUG - Sucessfully closed JobDetailsView.
2025-11-12 10:19:20,444 - ispa_next.appointment_ending - DEBUG - entered complete process
2025-11-12 10:19:20,445 - ispa_next.appointment_loop.helpers - DEBUG - Checking for potential OIDC Login dialog
2025-11-12 10:19:21,039 - ispa_next.common.shared - DEBUG - Attempting to open ISPA tab: Abschluss
2025-11-12 10:19:21,145 - ispa_next.common.shared - DEBUG - ISPA tab Abschluss is already open
2025-11-12 10:19:21,146 - ispa_next.appointment_ending - DEBUG - complete_process isn't exiting early.
2025-11-12 10:19:22,796 - ispa_next.appointment_ending - DEBUG - No need to assign service parts target.
2025-11-12 10:19:32,177 - ispa_next.appointment_ending - DEBUG - return from complete process straight to process_list with saving without error_dialog.
2025-11-12 10:19:32,556 - ispa_next.appointment_loop.main - DEBUG - Closing appointment 1.
2025-11-12 10:19:32,888 - ispa_next.appointments.functions - DEBUG - filter_appointments_grid_by_term
2025-11-12 10:19:33,632 - ispa_next.appointments.functions - DEBUG - Gross total count for all events at location: 320
2025-11-12 10:19:33,634 - ispa_next.appointments.functions - DEBUG - Unfiltered total count for 'Terminvereinbarung' events: 1
2025-11-12 10:19:36,236 - ispa_next.appointments.functions - DEBUG - Filtered by term total count for 'Terminvereinbarung' events: 101
2025-11-12 10:19:36,237 - ispa_next.appointments.functions - DEBUG - fetch_appointments_from_grid
2025-11-12 10:19:36,846 - ispa_next.appointments.models - DEBUG - Appointment Stephan Donatus Schmidbauer Herr M-DS 1828 WMWLR910902B00043 ohne Termin.
2025-11-12 10:19:36,853 - ispa_next.appointments.models - DEBUG - Appointment Antonio Hellenkamp Herr TS-N 77 WBAAX51050PD44328 ohne Termin.
2025-11-12 10:19:36,896 - ispa_next.appointments.models - DEBUG - Appointment Firma Apex Netzwerktechnik GmbH TS-AX 502 WMWWH510603C79869 ohne Termin.
2025-11-12 10:19:36,900 - ispa_next.main - DEBUG - 



2025-11-12 10:19:36,900 - ispa_next.main - DEBUG - starting with process 2 (TS-GH 434) of 4
2025-11-12 10:19:36,904 - ispa_next.appointment_loop.helpers - DEBUG - Checking for potential OIDC Login dialog
2025-11-12 10:19:37,855 - ispa_next.appointments.functions - DEBUG - filter_appointments_grid_by_term
2025-11-12 10:19:38,633 - ispa_next.appointments.functions - DEBUG - Gross total count for all events at location: 320
2025-11-12 10:19:38,635 - ispa_next.appointments.functions - DEBUG - Unfiltered total count for 'Terminvereinbarung' events: 101
2025-11-12 10:19:39,728 - ispa_next.appointments.functions - DEBUG - Filtered by term total count for 'Terminvereinbarung' events: 1
2025-11-12 10:19:39,729 - ispa_next.appointments.functions - DEBUG - fetch_appointments_from_grid
2025-11-12 10:20:08,865 - ispa_next.appointment_loop.main - DEBUG - Appointment failed: Traceback (most recent call last):
  File "C:\Users\Bot\AppData\Local\automizor\runner\ispa_next\appointment_loop\main.py", line 43, in process_appointment
    handle_briefing_screen(element=app)
  File "C:\Users\Bot\AppData\Local\automizor\runner\ispa_next\appointments\functions.py", line 179, in handle_briefing_screen
    raise ViewTransitionError("Couldn't open 'Terminvereinbarung', proceed with next appointment")
ispa_next.exceptions.ViewTransitionError: Couldn't open 'Terminvereinbarung', proceed with next appointment

2025-11-12 10:20:08,945 - ispa_next.appointment_loop.main - DEBUG - Closing appointment 2.
2025-11-12 10:20:08,947 - ispa_next.appointments.functions - DEBUG - filter_appointments_grid_by_term
2025-11-12 10:20:09,333 - ispa_next.appointments.functions - DEBUG - Gross total count for all events at location: 320
2025-11-12 10:20:09,335 - ispa_next.appointments.functions - DEBUG - Unfiltered total count for 'Terminvereinbarung' events: 1
2025-11-12 10:20:11,792 - ispa_next.appointments.functions - DEBUG - Filtered by term total count for 'Terminvereinbarung' events: 101
2025-11-12 10:20:11,792 - ispa_next.appointments.functions - DEBUG - fetch_appointments_from_grid
2025-11-12 10:20:12,634 - ispa_next.appointments.models - DEBUG - Appointment Stephan Donatus Schmidbauer Herr M-DS 1828 WMWLR910902B00043 ohne Termin.
2025-11-12 10:20:12,640 - ispa_next.appointments.models - DEBUG - Appointment Antonio Hellenkamp Herr TS-N 77 WBAAX51050PD44328 ohne Termin.
2025-11-12 10:20:12,649 - ispa_next.appointments.models - DEBUG - Appointment Firma Apex Netzwerktechnik GmbH TS-AX 502 WMWWH510603C79869 ohne Termin.
2025-11-12 10:20:12,653 - ispa_next.main - DEBUG - 



2025-11-12 10:20:12,653 - ispa_next.main - DEBUG - starting with process 3 (TS-KS 2005) of 4
2025-11-12 10:20:12,656 - ispa_next.appointment_loop.helpers - DEBUG - Checking for potential OIDC Login dialog
2025-11-12 10:20:13,735 - ispa_next.appointments.functions - DEBUG - filter_appointments_grid_by_term
2025-11-12 10:20:14,474 - ispa_next.appointments.functions - DEBUG - Gross total count for all events at location: 320
2025-11-12 10:20:14,475 - ispa_next.appointments.functions - DEBUG - Unfiltered total count for 'Terminvereinbarung' events: 101
2025-11-12 10:20:15,689 - ispa_next.appointments.functions - DEBUG - Filtered by term total count for 'Terminvereinbarung' events: 1
2025-11-12 10:20:15,691 - ispa_next.appointments.functions - DEBUG - fetch_appointments_from_grid
2025-11-12 10:20:36,193 - ispa_next.appointment_loop.main - DEBUG - Appointment failed: Traceback (most recent call last):
  File "C:\Users\Bot\AppData\Local\automizor\runner\ispa_next\appointment_loop\main.py", line 43, in process_appointment
    handle_briefing_screen(element=app)
  File "C:\Users\Bot\AppData\Local\automizor\runner\ispa_next\appointments\functions.py", line 179, in handle_briefing_screen
    raise ViewTransitionError("Couldn't open 'Terminvereinbarung', proceed with next appointment")
ispa_next.exceptions.ViewTransitionError: Couldn't open 'Terminvereinbarung', proceed with next appointment

2025-11-12 10:20:36,202 - ispa_next.appointment_loop.main - DEBUG - Closing appointment 3.
2025-11-12 10:20:36,205 - ispa_next.appointments.functions - DEBUG - filter_appointments_grid_by_term
2025-11-12 10:20:36,533 - ispa_next.appointments.functions - DEBUG - Gross total count for all events at location: 320
2025-11-12 10:20:36,534 - ispa_next.appointments.functions - DEBUG - Unfiltered total count for 'Terminvereinbarung' events: 1
2025-11-12 10:20:38,486 - ispa_next.appointments.functions - DEBUG - Filtered by term total count for 'Terminvereinbarung' events: 101
2025-11-12 10:20:38,486 - ispa_next.appointments.functions - DEBUG - fetch_appointments_from_grid
2025-11-12 10:20:39,098 - ispa_next.appointments.models - DEBUG - Appointment Stephan Donatus Schmidbauer Herr M-DS 1828 WMWLR910902B00043 ohne Termin.
2025-11-12 10:20:39,103 - ispa_next.appointments.models - DEBUG - Appointment Antonio Hellenkamp Herr TS-N 77 WBAAX51050PD44328 ohne Termin.
2025-11-12 10:20:39,110 - ispa_next.appointments.models - DEBUG - Appointment Firma Apex Netzwerktechnik GmbH TS-AX 502 WMWWH510603C79869 ohne Termin.
2025-11-12 10:20:39,113 - ispa_next.main - DEBUG - 



2025-11-12 10:20:39,113 - ispa_next.main - DEBUG - starting with process 4 (TS-MP 207) of 4
2025-11-12 10:20:39,116 - ispa_next.appointment_loop.helpers - DEBUG - Checking for potential OIDC Login dialog
2025-11-12 10:20:39,921 - ispa_next.appointments.functions - DEBUG - filter_appointments_grid_by_term
2025-11-12 10:20:40,672 - ispa_next.appointments.functions - DEBUG - Gross total count for all events at location: 320
2025-11-12 10:20:40,673 - ispa_next.appointments.functions - DEBUG - Unfiltered total count for 'Terminvereinbarung' events: 101
2025-11-12 10:20:41,766 - ispa_next.appointments.functions - DEBUG - Filtered by term total count for 'Terminvereinbarung' events: 1
2025-11-12 10:20:41,767 - ispa_next.appointments.functions - DEBUG - fetch_appointments_from_grid
2025-11-12 10:21:02,065 - ispa_next.rkr_manager.main - DEBUG - RemoteKeyReadManager initialized
2025-11-12 10:21:03,946 - ispa_next.appointments.functions - DEBUG - Appointment was already processed in the past.
2025-11-12 10:21:08,834 - ispa_next.functions - DEBUG - get_cart_contents
2025-11-12 10:21:10,739 - ispa_next.functions - DEBUG - check_and_verify_hu_date
2025-11-12 10:21:10,740 - ispa_next.common.shared - DEBUG - Attempting to open ISPA tab: Kunden & Fahrzeug
2025-11-12 10:21:10,803 - ispa_next.common.shared - DEBUG - ISPA tab Kunden & Fahrzeug is already open
2025-11-12 10:21:11,210 - ispa_next.functions - DEBUG - check_potential_workshop_test
2025-11-12 10:21:11,213 - ispa_next.functions - DEBUG - check_vehicle_age_for_service_plus
2025-11-12 10:21:11,213 - ispa_next.common.shared - DEBUG - Attempting to open ISPA tab: Kunden & Fahrzeug
2025-11-12 10:21:11,328 - ispa_next.common.shared - DEBUG - ISPA tab Kunden & Fahrzeug is already open
2025-11-12 10:21:18,163 - ispa_next.rkr_manager.main - DEBUG - running RemoteKeyReadManager
2025-11-12 10:21:18,164 - ispa_next.common.shared - DEBUG - Attempting to open ISPA tab: Wartung
2025-11-12 10:21:19,032 - ispa_next.common.shared - DEBUG - Successfully opened ISPA tab: Wartung
2025-11-12 10:21:21,035 - ispa_next.rkr_manager.state - DEBUG - Entering initial state
2025-11-12 10:21:21,162 - ispa_next.rkr_manager.state - DEBUG - Checking customer consent
2025-11-12 10:21:21,271 - ispa_next.rkr_manager.state - DEBUG - Checking data freshness
2025-11-12 10:21:21,337 - ispa_next.rkr_manager.state - DEBUG - Checking color in CBS positions
2025-11-12 10:21:25,528 - ispa_next.rkr_manager.state - DEBUG - State machine completed with reason: data_still_good
2025-11-12 10:21:26,533 - ispa_next.functions - DEBUG - handle_data_privacy_consent
2025-11-12 10:21:26,534 - ispa_next.common.shared - DEBUG - Attempting to open ISPA tab: Kunden & Fahrzeug
2025-11-12 10:21:26,996 - ispa_next.common.shared - DEBUG - Successfully opened ISPA tab: Kunden & Fahrzeug
2025-11-12 10:21:37,863 - ispa_next.functions - DEBUG - DSE icon is yellow
2025-11-12 10:21:37,863 - ispa_next.functions - DEBUG - DSE dealer channels are valid
2025-11-12 10:21:41,846 - ispa_next.functions - DEBUG - transfer_customer_data_to_appointment
2025-11-12 10:21:41,849 - ispa_next.common.shared - DEBUG - Attempting to open ISPA tab: Kunden & Fahrzeug
2025-11-12 10:21:41,948 - ispa_next.common.shared - DEBUG - ISPA tab Kunden & Fahrzeug is already open
2025-11-12 10:21:41,956 - ispa_next.functions - DEBUG - fetch_customer_data
2025-11-12 10:21:41,990 - ispa_next.functions - DEBUG - fetch_customer_data_from_bmw_id
2025-11-12 10:21:43,206 - ispa_next.functions - DEBUG - All data found, skipping remaining sources
2025-11-12 10:21:43,471 - ispa_next.functions - DEBUG - copy_customer_data_to_appointment
2025-11-12 10:21:45,221 - ispa_next.functions - DEBUG - Updated appointment (AJ00018114) customer contact data.
2025-11-12 10:21:46,112 - ispa_next.functions - DEBUG - check_for_alpina_vehicle
2025-11-12 10:21:46,113 - ispa_next.functions - DEBUG - check_bmw_id_add_to_list
2025-11-12 10:21:46,826 - ispa_next.functions - DEBUG - check_home_dealer_add_to_list
2025-11-12 10:21:46,827 - ispa_next.common.shared - DEBUG - Attempting to open ISPA tab: Fahrzeugzustand
2025-11-12 10:21:47,491 - ispa_next.common.shared - DEBUG - Successfully opened ISPA tab: Fahrzeugzustand
2025-11-12 10:21:51,091 - ispa_next.rkr_manager.main - DEBUG - running RemoteKeyReadManager
2025-11-12 10:21:51,091 - ispa_next.rkr_manager.main - DEBUG - early exiting RemoteKeyReadManager - enabled=False or early_exit_enabled=True
2025-11-12 10:21:51,120 - ispa_next.functions - DEBUG - generate_attachments
2025-11-12 10:21:51,121 - ispa_next.functions - DEBUG - check_service_requirement
2025-11-12 10:21:51,122 - ispa_next.common.shared - DEBUG - Attempting to open ISPA tab: Wartung
2025-11-12 10:21:51,633 - ispa_next.common.shared - DEBUG - Successfully opened ISPA tab: Wartung
2025-11-12 10:21:55,802 - ispa_next.functions - DEBUG - check_service_requirement result: pdf_needed =False
2025-11-12 10:21:55,805 - ispa_next.wipers - DEBUG - handle_wiper_service_contracts
2025-11-12 10:21:55,805 - ispa_next.common.shared - DEBUG - Attempting to open ISPA tab: Wartung
2025-11-12 10:21:55,868 - ispa_next.common.shared - DEBUG - ISPA tab Wartung is already open
2025-11-12 10:21:56,254 - ispa_next.common.shared - DEBUG - Attempting to open ISPA tab: Kunden & Fahrzeug
2025-11-12 10:21:56,729 - ispa_next.common.shared - DEBUG - Successfully opened ISPA tab: Kunden & Fahrzeug
2025-11-12 10:21:56,730 - ispa_next.common.shared - DEBUG - Attempting to open ISPA tab: Wartung
2025-11-12 10:21:57,422 - ispa_next.common.shared - DEBUG - Successfully opened ISPA tab: Wartung
2025-11-12 10:21:57,423 - ispa_next.package_manager.main - DEBUG - updating cart content
2025-11-12 10:21:59,319 - ispa_next.package_manager.main - DEBUG - updating advice list content
2025-11-12 10:21:59,321 - ispa_next.package_manager.helper - DEBUG - get_advice_list_contents
2025-11-12 10:22:00,387 - ispa_next.package_manager.main - DEBUG - determining package movements
2025-11-12 10:22:00,388 - ispa_next.package_manager.main - DEBUG - determining packages to place
2025-11-12 10:22:00,390 - ispa_next.package_manager.main - DEBUG - Cannot place Beide Bremsscheiben vorn aus- und einbauen/ersetze: placement requirements not met
2025-11-12 10:22:00,391 - ispa_next.package_manager.main - DEBUG - Cannot place Beide Bremsscheiben hinten aus- und einbauen/erset: placement requirements not met
2025-11-12 10:22:00,393 - ispa_next.package_manager.main - DEBUG - found packages to cart: set()
2025-11-12 10:22:00,394 - ispa_next.package_manager.main - DEBUG - determining packages to place
2025-11-12 10:22:00,396 - ispa_next.package_manager.main - DEBUG - Cannot place Ladewunsch und Ladezustand: not present in source
2025-11-12 10:22:00,398 - ispa_next.package_manager.main - DEBUG - found packages to advice_list: set()
2025-11-12 10:22:00,399 - ispa_next.package_manager.main - DEBUG - determining package to delete
2025-11-12 10:22:00,401 - ispa_next.package_manager.main - DEBUG - found packages to delete: set()
2025-11-12 10:22:00,407 - ispa_next.package_manager.main - DEBUG - determining package to update
2025-11-12 10:22:00,410 - ispa_next.package_manager.main - DEBUG - found packages to update: set()
2025-11-12 10:22:00,417 - ispa_next.functions - DEBUG - verify_cart_packages_additional_texts
2025-11-12 10:22:00,418 - ispa_next.functions - DEBUG - check_cart_for_additional_text_packages
2025-11-12 10:22:00,419 - ispa_next.functions - DEBUG - get_cart_contents
2025-11-12 10:22:02,306 - ispa_next.functions - DEBUG - handle_mobility_replacement
2025-11-12 10:22:02,307 - ispa_next.functions - DEBUG - verify_battery_in_motoroil_package
2025-11-12 10:22:02,310 - ispa_next.functions - DEBUG - get_cart_contents
2025-11-12 10:22:04,213 - ispa_next.functions - DEBUG - verify_breaks_in_break_package
2025-11-12 10:22:04,214 - ispa_next.functions - DEBUG - verify breaks added if breaks service in cart
2025-11-12 10:22:04,216 - ispa_next.functions - DEBUG - get_cart_contents
2025-11-12 10:22:06,053 - ispa_next.functions - DEBUG - process_check_control
2025-11-12 10:22:06,054 - ispa_next.common.shared - DEBUG - Attempting to open ISPA tab: Beanstandungen
2025-11-12 10:22:06,632 - ispa_next.common.shared - DEBUG - Successfully opened ISPA tab: Beanstandungen
2025-11-12 10:22:06,875 - ispa_next.functions - DEBUG - get_cart_contents
2025-11-12 10:22:16,036 - ispa_next.functions - DEBUG - trying add_material_to_package
2025-11-12 10:22:16,038 - ispa_next.functions - DEBUG - get_cart_contents
2025-11-12 10:22:17,941 - ispa_next.functions - DEBUG - notify_aw_increase_to_service_advisor
2025-11-12 10:22:28,523 - ispa_next.functions - DEBUG - check_cart_packages_for_parts_service_and_parts_availability
2025-11-12 10:22:29,021 - ispa_next.common.shared - DEBUG - Attempting to open ISPA tab: Abschluss
2025-11-12 10:22:29,534 - ispa_next.common.shared - DEBUG - Successfully opened ISPA tab: Abschluss
2025-11-12 10:22:29,768 - ispa_next.functions - DEBUG - get_cart_contents
2025-11-12 10:22:38,577 - ispa_next.appointment_ending - DEBUG - entered complete process
2025-11-12 10:22:38,578 - ispa_next.appointment_loop.helpers - DEBUG - Checking for potential OIDC Login dialog
2025-11-12 10:22:39,137 - ispa_next.common.shared - DEBUG - Attempting to open ISPA tab: Abschluss
2025-11-12 10:22:39,207 - ispa_next.common.shared - DEBUG - ISPA tab Abschluss is already open
2025-11-12 10:22:39,208 - ispa_next.appointment_ending - DEBUG - complete_process isn't exiting early.
2025-11-12 10:22:41,948 - ispa_next.appointment_ending - DEBUG - Service parts target assigned before process exit.
2025-11-12 10:22:49,424 - ispa_next.appointment_ending - DEBUG - return from complete process straight to process_list with saving without error_dialog.
2025-11-12 10:22:49,796 - ispa_next.appointment_loop.main - DEBUG - Closing appointment 4.
2025-11-12 10:22:50,134 - ispa_next.appointments.functions - DEBUG - filter_appointments_grid_by_term
2025-11-12 10:22:51,020 - ispa_next.appointments.functions - DEBUG - Gross total count for all events at location: 320
2025-11-12 10:22:51,022 - ispa_next.appointments.functions - DEBUG - Unfiltered total count for 'Terminvereinbarung' events: 1
2025-11-12 10:22:53,833 - ispa_next.appointments.functions - DEBUG - Filtered by term total count for 'Terminvereinbarung' events: 101
2025-11-12 10:22:53,834 - ispa_next.appointments.functions - DEBUG - fetch_appointments_from_grid
2025-11-12 10:22:54,555 - ispa_next.appointments.models - DEBUG - Appointment Stephan Donatus Schmidbauer Herr M-DS 1828 WMWLR910902B00043 ohne Termin.
2025-11-12 10:22:54,560 - ispa_next.appointments.models - DEBUG - Appointment Antonio Hellenkamp Herr TS-N 77 WBAAX51050PD44328 ohne Termin.
2025-11-12 10:22:54,572 - ispa_next.appointments.models - DEBUG - Appointment Firma Apex Netzwerktechnik GmbH TS-AX 502 WMWWH510603C79869 ohne Termin.
