2025-11-12 13:00:33,463 - ispa_next.main - DEBUG - ISPA Next attempt (1 / 5)
2025-11-12 13:00:33,468 - overlays.client - INFO - Connected to overlay manager pipe
2025-11-12 13:00:46,402 - ispa_next.app_start.functions - DEBUG - handle_update_available
2025-11-12 13:00:57,041 - ispa_next.app_start.functions - DEBUG - has_ispa_errors
2025-11-12 13:01:12,455 - ispa_next.app_start.functions - DEBUG - authenticate_user
2025-11-12 13:01:46,206 - ispa_next.app_start.main - DEBUG - Login successful
2025-11-12 13:02:01,584 - ispa_next.appointments.functions - DEBUG - order_appointments_grid_by_created_at
2025-11-12 13:02:05,140 - ispa_next.appointments.functions - DEBUG - filter_appointments_grid_by_term
2025-11-12 13:02:06,375 - ispa_next.appointments.functions - DEBUG - Gross total count for all events at location: 533
2025-11-12 13:02:06,377 - ispa_next.appointments.functions - DEBUG - Unfiltered total count for 'Terminvereinbarung' events: 34
2025-11-12 13:02:08,309 - ispa_next.appointments.functions - DEBUG - Filtered by term total count for 'Terminvereinbarung' events: 12
2025-11-12 13:02:08,310 - ispa_next.appointments.functions - DEBUG - recover_or_exit_IPS_error
2025-11-12 13:02:08,311 - ispa_next.appointments.functions - DEBUG - check_appointments_grid_for_IPS_error
2025-11-12 13:02:09,224 - ispa_next.appointments.functions - DEBUG - check_appointments_grid_for_IPS_error
2025-11-12 13:02:10,292 - ispa_next.appointments.functions - DEBUG - fetch_appointments_from_grid
2025-11-12 13:02:11,222 - ispa_next.appointments.models - DEBUG - Skipping appointment without VIN
2025-11-12 13:02:11,266 - ispa_next.appointments.models - DEBUG - Appointment Martin Langosch R-IL 276 WBA3K11090F847413 ohne Termin.
2025-11-12 13:02:11,274 - ispa_next.appointments.models - DEBUG - Appointment Murat Kirav SAD-K 2012 WBAUZ350X0N014179 ohne Termin.
2025-11-12 13:02:11,278 - ispa_next.main - DEBUG - Found 4 out of 8 appointments to process (configured limit: 15).
2025-11-12 13:02:11,278 - ispa_next.main - DEBUG - Processing 4 fresh appointments.
2025-11-12 13:02:11,278 - ispa_next.main - DEBUG - Processing 0 already visited appointments (w/ RKR not callable).
2025-11-12 13:02:11,278 - ispa_next.main - DEBUG - All appointments: M-MV 1140, SAD-SW 700, SAD-OO 80E, SAD-LF 333
2025-11-12 13:02:11,281 - ispa_next.main - DEBUG - 



2025-11-12 13:02:11,282 - ispa_next.main - DEBUG - starting with process 1 (M-MV 1140) of 4
2025-11-12 13:02:11,285 - ispa_next.appointment_loop.helpers - DEBUG - Checking for potential OIDC Login dialog
2025-11-12 13:02:12,163 - ispa_next.appointments.functions - DEBUG - filter_appointments_grid_by_term
2025-11-12 13:02:13,082 - ispa_next.appointments.functions - DEBUG - Gross total count for all events at location: 533
2025-11-12 13:02:13,083 - ispa_next.appointments.functions - DEBUG - Unfiltered total count for 'Terminvereinbarung' events: 12
2025-11-12 13:02:14,363 - ispa_next.appointments.functions - DEBUG - Filtered by term total count for 'Terminvereinbarung' events: 1
2025-11-12 13:02:14,364 - ispa_next.appointments.functions - DEBUG - fetch_appointments_from_grid
2025-11-12 13:02:42,886 - ispa_next.rkr_manager.main - DEBUG - RemoteKeyReadManager initialized
2025-11-12 13:02:52,108 - ispa_next.functions - DEBUG - get_cart_contents
2025-11-12 13:02:53,988 - ispa_next.functions - DEBUG - check_and_verify_hu_date
2025-11-12 13:02:53,988 - ispa_next.common.shared - DEBUG - Attempting to open ISPA tab: Kunden & Fahrzeug
2025-11-12 13:02:54,110 - ispa_next.common.shared - DEBUG - ISPA tab Kunden & Fahrzeug is already open
2025-11-12 13:02:54,281 - ispa_next.functions - DEBUG - check_potential_workshop_test
2025-11-12 13:02:54,283 - ispa_next.functions - DEBUG - check_vehicle_age_for_service_plus
2025-11-12 13:02:54,285 - ispa_next.common.shared - DEBUG - Attempting to open ISPA tab: Kunden & Fahrzeug
2025-11-12 13:02:54,359 - ispa_next.common.shared - DEBUG - ISPA tab Kunden & Fahrzeug is already open
2025-11-12 13:02:57,555 - ispa_next.rkr_manager.main - DEBUG - running RemoteKeyReadManager
2025-11-12 13:02:57,557 - ispa_next.common.shared - DEBUG - Attempting to open ISPA tab: Wartung
2025-11-12 13:02:58,636 - ispa_next.common.shared - DEBUG - Successfully opened ISPA tab: Wartung
2025-11-12 13:03:00,642 - ispa_next.rkr_manager.state - DEBUG - Entering initial state
2025-11-12 13:03:00,793 - ispa_next.rkr_manager.state - DEBUG - Checking customer consent
2025-11-12 13:03:00,980 - ispa_next.rkr_manager.state - DEBUG - Checking data freshness
2025-11-12 13:03:01,059 - ispa_next.rkr_manager.state - DEBUG - Checking color in CBS positions
2025-11-12 13:03:05,264 - ispa_next.rkr_manager.state - DEBUG - State machine completed with reason: data_still_good
2025-11-12 13:03:06,269 - ispa_next.functions - DEBUG - handle_data_privacy_consent
2025-11-12 13:03:06,270 - ispa_next.common.shared - DEBUG - Attempting to open ISPA tab: Kunden & Fahrzeug
2025-11-12 13:03:06,789 - ispa_next.common.shared - DEBUG - Successfully opened ISPA tab: Kunden & Fahrzeug
2025-11-12 13:03:17,168 - ispa_next.functions - DEBUG - DSE icon is yellow
2025-11-12 13:03:17,168 - ispa_next.functions - DEBUG - DSE dealer channels are valid
2025-11-12 13:03:24,030 - ispa_next.functions - DEBUG - transfer_customer_data_to_appointment
2025-11-12 13:03:24,034 - ispa_next.common.shared - DEBUG - Attempting to open ISPA tab: Kunden & Fahrzeug
2025-11-12 13:03:24,125 - ispa_next.common.shared - DEBUG - ISPA tab Kunden & Fahrzeug is already open
2025-11-12 13:03:24,125 - ispa_next.functions - DEBUG - fetch_customer_data
2025-11-12 13:03:24,170 - ispa_next.functions - DEBUG - fetch_customer_data_from_bmw_id
2025-11-12 13:03:25,392 - ispa_next.functions - DEBUG - All data found, skipping remaining sources
2025-11-12 13:03:25,631 - ispa_next.functions - DEBUG - copy_customer_data_to_appointment
2025-11-12 13:03:29,502 - ispa_next.functions - DEBUG - Updated appointment (AA00045559) customer contact data.
2025-11-12 13:03:30,446 - ispa_next.functions - DEBUG - check_for_alpina_vehicle
2025-11-12 13:03:30,447 - ispa_next.functions - DEBUG - check_bmw_id_add_to_list
2025-11-12 13:03:31,255 - ispa_next.functions - DEBUG - check_home_dealer_add_to_list
2025-11-12 13:03:31,257 - ispa_next.common.shared - DEBUG - Attempting to open ISPA tab: Fahrzeugzustand
2025-11-12 13:03:31,961 - ispa_next.common.shared - DEBUG - Successfully opened ISPA tab: Fahrzeugzustand
2025-11-12 13:03:36,446 - ispa_next.rkr_manager.main - DEBUG - running RemoteKeyReadManager
2025-11-12 13:03:36,446 - ispa_next.rkr_manager.main - DEBUG - early exiting RemoteKeyReadManager - enabled=False or early_exit_enabled=True
2025-11-12 13:03:36,448 - ispa_next.functions - DEBUG - generate_attachments
2025-11-12 13:03:36,449 - ispa_next.functions - DEBUG - check_service_requirement
2025-11-12 13:03:36,449 - ispa_next.common.shared - DEBUG - Attempting to open ISPA tab: Wartung
2025-11-12 13:03:36,944 - ispa_next.common.shared - DEBUG - Successfully opened ISPA tab: Wartung
2025-11-12 13:03:41,138 - ispa_next.functions - DEBUG - check_service_requirement result: pdf_needed =False
2025-11-12 13:03:41,142 - ispa_next.wipers - DEBUG - handle_wiper_service_contracts
2025-11-12 13:03:41,142 - ispa_next.common.shared - DEBUG - Attempting to open ISPA tab: Wartung
2025-11-12 13:03:41,221 - ispa_next.common.shared - DEBUG - ISPA tab Wartung is already open
2025-11-12 13:03:46,796 - ispa_next.common.shared - DEBUG - Attempting to open ISPA tab: Kunden & Fahrzeug
2025-11-12 13:03:47,284 - ispa_next.common.shared - DEBUG - Successfully opened ISPA tab: Kunden & Fahrzeug
2025-11-12 13:03:47,286 - ispa_next.common.shared - DEBUG - Attempting to open ISPA tab: Wartung
2025-11-12 13:03:47,960 - ispa_next.common.shared - DEBUG - Successfully opened ISPA tab: Wartung
2025-11-12 13:03:47,962 - ispa_next.package_manager.main - DEBUG - updating cart content
2025-11-12 13:03:50,419 - ispa_next.package_manager.main - DEBUG - updating advice list content
2025-11-12 13:03:50,423 - ispa_next.package_manager.helper - DEBUG - get_advice_list_contents
2025-11-12 13:03:51,527 - ispa_next.package_manager.main - DEBUG - determining package movements
2025-11-12 13:03:51,529 - ispa_next.package_manager.main - DEBUG - determining packages to place
2025-11-12 13:03:51,533 - ispa_next.package_manager.main - DEBUG - Cannot place Kostenlose Fzg Reinigung: active placement guards
2025-11-12 13:03:51,533 - ispa_next.package_manager.main - DEBUG - found packages to cart: set()
2025-11-12 13:03:51,535 - ispa_next.package_manager.main - DEBUG - determining packages to place
2025-11-12 13:03:51,536 - ispa_next.package_manager.main - DEBUG - Cannot place Beide Bremsscheiben vorn aus- und einbauen/ersetze: placement requirements not met
2025-11-12 13:03:51,538 - ispa_next.package_manager.main - DEBUG - Cannot place Ladewunsch und Ladezustand: not present in source
2025-11-12 13:03:51,540 - ispa_next.package_manager.main - DEBUG - Cannot place Beide Bremsscheiben hinten aus- und einbauen/erset: placement requirements not met
2025-11-12 13:03:51,540 - ispa_next.package_manager.main - DEBUG - found packages to advice_list: set()
2025-11-12 13:03:51,542 - ispa_next.package_manager.main - DEBUG - determining package to delete
2025-11-12 13:03:51,544 - ispa_next.package_manager.main - DEBUG - found packages to delete: set()
2025-11-12 13:03:51,544 - ispa_next.package_manager.main - DEBUG - determining package to update
2025-11-12 13:03:51,548 - ispa_next.package_manager.main - DEBUG - found packages to update: set()
2025-11-12 13:03:51,558 - ispa_next.functions - DEBUG - verify_cart_packages_additional_texts
2025-11-12 13:03:51,559 - ispa_next.functions - DEBUG - check_cart_for_additional_text_packages
2025-11-12 13:03:51,560 - ispa_next.functions - DEBUG - get_cart_contents
2025-11-12 13:03:54,156 - ispa_next.functions - DEBUG - handle_mobility_replacement
2025-11-12 13:03:54,157 - ispa_next.functions - DEBUG - verify_battery_in_motoroil_package
2025-11-12 13:03:54,158 - ispa_next.functions - DEBUG - get_cart_contents
2025-11-12 13:03:56,704 - ispa_next.functions - DEBUG - verify_breaks_in_break_package
2025-11-12 13:03:56,705 - ispa_next.functions - DEBUG - verify breaks added if breaks service in cart
2025-11-12 13:03:56,707 - ispa_next.functions - DEBUG - get_cart_contents
2025-11-12 13:03:59,301 - ispa_next.functions - DEBUG - process_check_control
2025-11-12 13:03:59,301 - ispa_next.functions - DEBUG - trying add_material_to_package
2025-11-12 13:03:59,305 - ispa_next.functions - DEBUG - get_cart_contents
2025-11-12 13:04:01,878 - ispa_next.functions - DEBUG - notify_aw_increase_to_service_advisor
2025-11-12 13:04:12,872 - ispa_next.functions - DEBUG - check_cart_packages_for_parts_service_and_parts_availability
2025-11-12 13:04:12,874 - ispa_next.appointment_ending - DEBUG - entered complete process
2025-11-12 13:04:12,874 - ispa_next.appointment_loop.helpers - DEBUG - Checking for potential OIDC Login dialog
2025-11-12 13:04:13,327 - ispa_next.common.shared - DEBUG - Attempting to open ISPA tab: Abschluss
2025-11-12 13:04:14,007 - ispa_next.common.shared - DEBUG - Successfully opened ISPA tab: Abschluss
2025-11-12 13:04:14,007 - ispa_next.appointment_ending - DEBUG - complete_process isn't exiting early.
2025-11-12 13:04:15,411 - ispa_next.appointment_ending - DEBUG - No need to assign service parts target.
2025-11-12 13:04:25,064 - ispa_next.appointment_ending - DEBUG - return from complete process straight to process_list with saving without error_dialog.
2025-11-12 13:04:25,444 - ispa_next.appointment_loop.main - DEBUG - Closing appointment 1.
2025-11-12 13:04:26,032 - ispa_next.appointments.functions - DEBUG - filter_appointments_grid_by_term
2025-11-12 13:04:26,935 - ispa_next.appointments.functions - DEBUG - Gross total count for all events at location: 533
2025-11-12 13:04:26,938 - ispa_next.appointments.functions - DEBUG - Unfiltered total count for 'Terminvereinbarung' events: 1
2025-11-12 13:04:29,788 - ispa_next.appointments.functions - DEBUG - Filtered by term total count for 'Terminvereinbarung' events: 34
2025-11-12 13:04:29,789 - ispa_next.appointments.functions - DEBUG - fetch_appointments_from_grid
2025-11-12 13:04:30,573 - ispa_next.appointments.models - DEBUG - Appointment Dieter Heining QLB-OO 801 WBA6L31070FJ29638 ohne Termin.
2025-11-12 13:04:30,579 - ispa_next.appointments.models - DEBUG - Couldn't parse Appointment Firma Weber Isoliertechnik GmbH & Co WEN-IW 666/ WBA55DP070N234138, 2 validation errors for Appointment
Kennzeichen
  Value error, 'Kennzeichen' includes unallowed special characters. [type=value_error, input_value='WEN-IW 666/', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/value_error
Termin
  Value error, time data '' does not match format '%d.%m.%Y %H:%M' [type=value_error, input_value='', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/value_error
2025-11-12 13:04:30,585 - ispa_next.appointments.models - DEBUG - Appointment Klaus Faltermeier SAD-MF 315 WMWWJ510403M12730 ohne Termin.
2025-11-12 13:04:30,590 - ispa_next.main - DEBUG - 



2025-11-12 13:04:30,590 - ispa_next.main - DEBUG - starting with process 2 (SAD-SW 700) of 4
2025-11-12 13:04:30,592 - ispa_next.appointment_loop.helpers - DEBUG - Checking for potential OIDC Login dialog
2025-11-12 13:04:31,701 - ispa_next.appointments.functions - DEBUG - filter_appointments_grid_by_term
2025-11-12 13:04:32,724 - ispa_next.appointments.functions - DEBUG - Gross total count for all events at location: 533
2025-11-12 13:04:32,725 - ispa_next.appointments.functions - DEBUG - Unfiltered total count for 'Terminvereinbarung' events: 34
2025-11-12 13:04:34,095 - ispa_next.appointments.functions - DEBUG - Filtered by term total count for 'Terminvereinbarung' events: 1
2025-11-12 13:04:34,097 - ispa_next.appointments.functions - DEBUG - fetch_appointments_from_grid
2025-11-12 13:05:03,288 - ispa_next.rkr_manager.main - DEBUG - RemoteKeyReadManager initialized
2025-11-12 13:05:12,996 - ispa_next.functions - DEBUG - get_cart_contents
2025-11-12 13:05:14,920 - ispa_next.functions - DEBUG - check_and_verify_hu_date
2025-11-12 13:05:14,920 - ispa_next.common.shared - DEBUG - Attempting to open ISPA tab: Kunden & Fahrzeug
2025-11-12 13:05:15,012 - ispa_next.common.shared - DEBUG - ISPA tab Kunden & Fahrzeug is already open
2025-11-12 13:05:15,439 - ispa_next.functions - DEBUG - check_potential_workshop_test
2025-11-12 13:05:15,441 - ispa_next.functions - DEBUG - check_vehicle_age_for_service_plus
2025-11-12 13:05:15,441 - ispa_next.common.shared - DEBUG - Attempting to open ISPA tab: Kunden & Fahrzeug
2025-11-12 13:05:15,512 - ispa_next.common.shared - DEBUG - ISPA tab Kunden & Fahrzeug is already open
2025-11-12 13:05:18,686 - ispa_next.rkr_manager.main - DEBUG - running RemoteKeyReadManager
2025-11-12 13:05:18,688 - ispa_next.common.shared - DEBUG - Attempting to open ISPA tab: Wartung
2025-11-12 13:05:19,698 - ispa_next.common.shared - DEBUG - Successfully opened ISPA tab: Wartung
2025-11-12 13:05:21,703 - ispa_next.rkr_manager.state - DEBUG - Entering initial state
2025-11-12 13:05:21,812 - ispa_next.rkr_manager.state - DEBUG - Checking customer consent
2025-11-12 13:05:21,943 - ispa_next.rkr_manager.state - DEBUG - Checking data freshness
2025-11-12 13:05:22,018 - ispa_next.rkr_manager.state - DEBUG - Checking color in CBS positions
2025-11-12 13:05:26,231 - ispa_next.rkr_manager.state - DEBUG - State machine completed with reason: data_still_good
2025-11-12 13:05:27,236 - ispa_next.functions - DEBUG - handle_data_privacy_consent
2025-11-12 13:05:27,238 - ispa_next.common.shared - DEBUG - Attempting to open ISPA tab: Kunden & Fahrzeug
2025-11-12 13:05:27,725 - ispa_next.common.shared - DEBUG - Successfully opened ISPA tab: Kunden & Fahrzeug
2025-11-12 13:05:37,975 - ispa_next.functions - DEBUG - DSE icon is yellow
2025-11-12 13:05:37,975 - ispa_next.functions - DEBUG - DSE dealer channels are valid
2025-11-12 13:05:44,194 - ispa_next.functions - DEBUG - transfer_customer_data_to_appointment
2025-11-12 13:05:44,196 - ispa_next.common.shared - DEBUG - Attempting to open ISPA tab: Kunden & Fahrzeug
2025-11-12 13:05:44,275 - ispa_next.common.shared - DEBUG - ISPA tab Kunden & Fahrzeug is already open
2025-11-12 13:05:44,275 - ispa_next.functions - DEBUG - fetch_customer_data
2025-11-12 13:05:44,309 - ispa_next.functions - DEBUG - fetch_customer_data_from_bmw_id
2025-11-12 13:05:45,514 - ispa_next.functions - DEBUG - All data found, skipping remaining sources
2025-11-12 13:05:45,750 - ispa_next.functions - DEBUG - copy_customer_data_to_appointment
2025-11-12 13:05:49,436 - ispa_next.functions - DEBUG - Updated appointment (AA00045558) customer contact data.
2025-11-12 13:05:50,351 - ispa_next.functions - DEBUG - check_for_alpina_vehicle
2025-11-12 13:05:50,352 - ispa_next.functions - DEBUG - check_bmw_id_add_to_list
2025-11-12 13:05:51,075 - ispa_next.functions - DEBUG - check_home_dealer_add_to_list
2025-11-12 13:05:51,075 - ispa_next.common.shared - DEBUG - Attempting to open ISPA tab: Fahrzeugzustand
2025-11-12 13:05:51,726 - ispa_next.common.shared - DEBUG - Successfully opened ISPA tab: Fahrzeugzustand
2025-11-12 13:05:55,298 - ispa_next.rkr_manager.main - DEBUG - running RemoteKeyReadManager
2025-11-12 13:05:55,298 - ispa_next.rkr_manager.main - DEBUG - early exiting RemoteKeyReadManager - enabled=False or early_exit_enabled=True
2025-11-12 13:05:55,300 - ispa_next.functions - DEBUG - generate_attachments
2025-11-12 13:05:55,302 - ispa_next.functions - DEBUG - check_service_requirement
2025-11-12 13:05:55,302 - ispa_next.common.shared - DEBUG - Attempting to open ISPA tab: Wartung
2025-11-12 13:05:55,793 - ispa_next.common.shared - DEBUG - Successfully opened ISPA tab: Wartung
2025-11-12 13:05:59,920 - ispa_next.functions - DEBUG - check_service_requirement result: pdf_needed =False
2025-11-12 13:05:59,926 - ispa_next.wipers - DEBUG - handle_wiper_service_contracts
2025-11-12 13:05:59,927 - ispa_next.common.shared - DEBUG - Attempting to open ISPA tab: Wartung
2025-11-12 13:06:00,010 - ispa_next.common.shared - DEBUG - ISPA tab Wartung is already open
2025-11-12 13:06:05,583 - ispa_next.common.shared - DEBUG - Attempting to open ISPA tab: Kunden & Fahrzeug
2025-11-12 13:06:06,062 - ispa_next.common.shared - DEBUG - Successfully opened ISPA tab: Kunden & Fahrzeug
2025-11-12 13:06:06,062 - ispa_next.common.shared - DEBUG - Attempting to open ISPA tab: Wartung
2025-11-12 13:06:06,668 - ispa_next.common.shared - DEBUG - Successfully opened ISPA tab: Wartung
2025-11-12 13:06:06,670 - ispa_next.package_manager.main - DEBUG - updating cart content
2025-11-12 13:06:08,605 - ispa_next.package_manager.main - DEBUG - updating advice list content
2025-11-12 13:06:08,607 - ispa_next.package_manager.helper - DEBUG - get_advice_list_contents
2025-11-12 13:06:09,640 - ispa_next.package_manager.main - DEBUG - determining package movements
2025-11-12 13:06:09,654 - ispa_next.package_manager.main - DEBUG - determining packages to place
2025-11-12 13:06:09,659 - ispa_next.package_manager.main - DEBUG - found packages to cart: {Package(name=Kostenlose Fzg Reinigung, source=from_tab, target=cart)}
2025-11-12 13:06:09,659 - ispa_next.package_manager.main - DEBUG - determining packages to place
2025-11-12 13:06:09,661 - ispa_next.package_manager.main - DEBUG - Cannot place Beide Bremsscheiben vorn aus- und einbauen/ersetze: placement requirements not met
2025-11-12 13:06:09,663 - ispa_next.package_manager.main - DEBUG - Cannot place Beide Bremsscheiben hinten aus- und einbauen/erset: placement requirements not met
2025-11-12 13:06:09,665 - ispa_next.package_manager.main - DEBUG - found packages to advice_list: {Package(name=Ladewunsch und Ladezustand, source=cart, target=advice_list)}
2025-11-12 13:06:09,667 - ispa_next.package_manager.main - DEBUG - determining package to delete
2025-11-12 13:06:09,671 - ispa_next.package_manager.main - DEBUG - found packages to delete: set()
2025-11-12 13:06:09,675 - ispa_next.package_manager.main - DEBUG - determining package to update
2025-11-12 13:06:09,681 - ispa_next.package_manager.main - DEBUG - found packages to update: set()
2025-11-12 13:06:09,685 - ispa_next.package_manager.helper - DEBUG - add_to_cart called
2025-11-12 13:06:10,374 - ispa_next.common.shared - DEBUG - Attempting to open ISPA tab: Marketing
2025-11-12 13:06:11,081 - ispa_next.common.shared - DEBUG - Successfully opened ISPA tab: Marketing
2025-11-12 13:06:13,224 - ispa_next.package_manager.helper - DEBUG - _add_to_container_manual
2025-11-12 13:06:13,225 - ispa_next.package_manager.helper - DEBUG - cart_operation called
2025-11-12 13:06:15,097 - ispa_next.package_manager.helper - DEBUG - Package name not found with coordinate: (-1700, 0)
2025-11-12 13:06:15,629 - ispa_next.package_manager.helper - DEBUG - Package name not found with coordinate: (-1685, 0)
2025-11-12 13:06:16,560 - root - WARNING - Failed to scroll control: (-2146233079, None, (None, None, None, 0, None))
2025-11-12 13:06:17,112 - ispa_next.package_manager.helper - DEBUG - Package name not found with coordinate: (-1700, 0)
2025-11-12 13:06:17,662 - ispa_next.package_manager.helper - DEBUG - Package name not found with coordinate: (-1685, 0)
2025-11-12 13:06:18,985 - root - WARNING - Failed to scroll control: (-2146233079, None, (None, None, None, 0, None))
2025-11-12 13:06:19,542 - ispa_next.package_manager.helper - DEBUG - Package name not found with coordinate: (-1700, 0)
2025-11-12 13:06:20,066 - ispa_next.package_manager.helper - DEBUG - Package name not found with coordinate: (-1685, 0)
2025-11-12 13:06:21,002 - root - WARNING - Failed to scroll control: (-2146233079, None, (None, None, None, 0, None))
2025-11-12 13:06:22,086 - ispa_next.package_manager.helper - DEBUG - Package name not found with coordinate: (-1700, 0)
2025-11-12 13:06:23,060 - root - WARNING - Failed to scroll control: (-2146233079, None, (None, None, None, 0, None))
2025-11-12 13:06:23,490 - ispa_next.functions - DEBUG - verify_cart_packages_additional_texts
2025-11-12 13:06:23,503 - ispa_next.functions - DEBUG - check_cart_for_additional_text_packages
2025-11-12 13:06:23,510 - ispa_next.functions - DEBUG - get_cart_contents
2025-11-12 13:06:25,395 - ispa_next.functions - DEBUG - handle_mobility_replacement
2025-11-12 13:06:25,396 - ispa_next.functions - DEBUG - verify_battery_in_motoroil_package
2025-11-12 13:06:25,402 - ispa_next.functions - DEBUG - get_cart_contents
2025-11-12 13:06:27,316 - ispa_next.functions - DEBUG - verify_breaks_in_break_package
2025-11-12 13:06:27,316 - ispa_next.functions - DEBUG - verify breaks added if breaks service in cart
2025-11-12 13:06:27,319 - ispa_next.functions - DEBUG - get_cart_contents
2025-11-12 13:06:29,256 - ispa_next.functions - DEBUG - process_check_control
2025-11-12 13:06:29,257 - ispa_next.functions - DEBUG - trying add_material_to_package
2025-11-12 13:06:29,258 - ispa_next.functions - DEBUG - get_cart_contents
2025-11-12 13:06:31,115 - ispa_next.functions - DEBUG - notify_aw_increase_to_service_advisor
2025-11-12 13:06:41,528 - ispa_next.functions - DEBUG - check_cart_packages_for_parts_service_and_parts_availability
2025-11-12 13:06:41,529 - ispa_next.appointment_ending - DEBUG - entered complete process
2025-11-12 13:06:41,529 - ispa_next.appointment_loop.helpers - DEBUG - Checking for potential OIDC Login dialog
2025-11-12 13:06:42,085 - ispa_next.common.shared - DEBUG - Attempting to open ISPA tab: Abschluss
2025-11-12 13:06:42,639 - ispa_next.common.shared - DEBUG - Successfully opened ISPA tab: Abschluss
2025-11-12 13:06:42,639 - ispa_next.appointment_ending - DEBUG - complete_process isn't exiting early.
2025-11-12 13:06:44,418 - ispa_next.appointment_ending - DEBUG - No need to assign service parts target.
2025-11-12 13:06:50,699 - ispa_next.appointment_ending - DEBUG - return from complete process straight to process_list with saving without error_dialog.
2025-11-12 13:06:51,067 - ispa_next.appointment_loop.main - DEBUG - Closing appointment 2.
2025-11-12 13:06:51,412 - ispa_next.appointments.functions - DEBUG - filter_appointments_grid_by_term
2025-11-12 13:06:52,599 - ispa_next.appointments.functions - DEBUG - Gross total count for all events at location: 533
2025-11-12 13:06:52,601 - ispa_next.appointments.functions - DEBUG - Unfiltered total count for 'Terminvereinbarung' events: 1
2025-11-12 13:06:55,520 - ispa_next.appointments.functions - DEBUG - Filtered by term total count for 'Terminvereinbarung' events: 34
2025-11-12 13:06:55,521 - ispa_next.appointments.functions - DEBUG - fetch_appointments_from_grid
2025-11-12 13:06:56,351 - ispa_next.appointments.models - DEBUG - Appointment Dieter Heining QLB-OO 801 WBA6L31070FJ29638 ohne Termin.
2025-11-12 13:06:56,360 - ispa_next.appointments.models - DEBUG - Couldn't parse Appointment Firma Weber Isoliertechnik GmbH & Co WEN-IW 666/ WBA55DP070N234138, 2 validation errors for Appointment
Kennzeichen
  Value error, 'Kennzeichen' includes unallowed special characters. [type=value_error, input_value='WEN-IW 666/', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/value_error
Termin
  Value error, time data '' does not match format '%d.%m.%Y %H:%M' [type=value_error, input_value='', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/value_error
2025-11-12 13:06:56,370 - ispa_next.appointments.models - DEBUG - Appointment Klaus Faltermeier SAD-MF 315 WMWWJ510403M12730 ohne Termin.
2025-11-12 13:06:56,376 - ispa_next.main - DEBUG - 



2025-11-12 13:06:56,376 - ispa_next.main - DEBUG - starting with process 3 (SAD-OO 80E) of 4
2025-11-12 13:06:56,380 - ispa_next.appointment_loop.helpers - DEBUG - Checking for potential OIDC Login dialog
2025-11-12 13:06:57,250 - ispa_next.appointments.functions - DEBUG - filter_appointments_grid_by_term
2025-11-12 13:06:58,214 - ispa_next.appointments.functions - DEBUG - Gross total count for all events at location: 533
2025-11-12 13:06:58,215 - ispa_next.appointments.functions - DEBUG - Unfiltered total count for 'Terminvereinbarung' events: 34
2025-11-12 13:06:59,509 - ispa_next.appointments.functions - DEBUG - Filtered by term total count for 'Terminvereinbarung' events: 1
2025-11-12 13:06:59,510 - ispa_next.appointments.functions - DEBUG - fetch_appointments_from_grid
2025-11-12 13:07:27,563 - ispa_next.rkr_manager.main - DEBUG - RemoteKeyReadManager initialized
2025-11-12 13:07:36,675 - ispa_next.functions - DEBUG - get_cart_contents
2025-11-12 13:07:41,956 - ispa_next.functions - DEBUG - check_and_verify_hu_date
2025-11-12 13:07:41,956 - ispa_next.common.shared - DEBUG - Attempting to open ISPA tab: Kunden & Fahrzeug
2025-11-12 13:07:42,067 - ispa_next.common.shared - DEBUG - ISPA tab Kunden & Fahrzeug is already open
2025-11-12 13:07:42,290 - ispa_next.functions - DEBUG - HU date is not available.
2025-11-12 13:07:49,288 - ispa_next.functions - DEBUG - check_potential_workshop_test
2025-11-12 13:07:49,291 - ispa_next.functions - DEBUG - check_vehicle_age_for_service_plus
2025-11-12 13:07:49,291 - ispa_next.common.shared - DEBUG - Attempting to open ISPA tab: Kunden & Fahrzeug
2025-11-12 13:07:49,379 - ispa_next.common.shared - DEBUG - ISPA tab Kunden & Fahrzeug is already open
2025-11-12 13:07:52,389 - ispa_next.rkr_manager.main - DEBUG - running RemoteKeyReadManager
2025-11-12 13:07:52,391 - ispa_next.common.shared - DEBUG - Attempting to open ISPA tab: Wartung
2025-11-12 13:07:53,153 - ispa_next.common.shared - DEBUG - Successfully opened ISPA tab: Wartung
2025-11-12 13:07:55,157 - ispa_next.rkr_manager.state - DEBUG - Entering initial state
2025-11-12 13:07:55,277 - ispa_next.rkr_manager.state - DEBUG - Checking customer consent
2025-11-12 13:07:55,360 - ispa_next.rkr_manager.state - DEBUG - Checking data freshness
2025-11-12 13:07:55,426 - ispa_next.rkr_manager.state - DEBUG - Checking color in CBS positions
2025-11-12 13:07:59,612 - ispa_next.rkr_manager.state - DEBUG - State machine completed with reason: data_still_good
2025-11-12 13:08:00,638 - ispa_next.functions - DEBUG - handle_data_privacy_consent
2025-11-12 13:08:00,638 - ispa_next.common.shared - DEBUG - Attempting to open ISPA tab: Kunden & Fahrzeug
2025-11-12 13:08:01,073 - ispa_next.common.shared - DEBUG - Successfully opened ISPA tab: Kunden & Fahrzeug
2025-11-12 13:08:13,135 - ispa_next.functions - DEBUG - DSE icon is red
2025-11-12 13:08:19,947 - ispa_next.functions - DEBUG - transfer_customer_data_to_appointment
2025-11-12 13:08:19,951 - ispa_next.common.shared - DEBUG - Attempting to open ISPA tab: Kunden & Fahrzeug
2025-11-12 13:08:20,015 - ispa_next.common.shared - DEBUG - ISPA tab Kunden & Fahrzeug is already open
2025-11-12 13:08:20,016 - ispa_next.functions - DEBUG - fetch_customer_data
2025-11-12 13:08:20,072 - ispa_next.functions - DEBUG - fetch_customer_data_from_bmw_id
2025-11-12 13:08:21,350 - ispa_next.functions - DEBUG - fetch_customer_data_from_dms
2025-11-12 13:08:22,381 - ispa_next.functions - DEBUG - fetch_customer_data_from_wps
2025-11-12 13:08:23,600 - ispa_next.functions - DEBUG - fetch_customer_data_from_temporary_data
2025-11-12 13:08:23,881 - ispa_next.functions - DEBUG - copy_customer_data_to_appointment
2025-11-12 13:08:27,130 - ispa_next.functions - DEBUG - Updated appointment (AA00045557) customer contact data.
2025-11-12 13:08:28,068 - ispa_next.functions - DEBUG - check_for_alpina_vehicle
2025-11-12 13:08:28,070 - ispa_next.functions - DEBUG - check_bmw_id_add_to_list
2025-11-12 13:08:28,977 - ispa_next.functions - DEBUG - check_home_dealer_add_to_list
2025-11-12 13:08:28,979 - ispa_next.common.shared - DEBUG - Attempting to open ISPA tab: Fahrzeugzustand
2025-11-12 13:08:29,615 - ispa_next.common.shared - DEBUG - Successfully opened ISPA tab: Fahrzeugzustand
2025-11-12 13:08:34,105 - ispa_next.rkr_manager.main - DEBUG - running RemoteKeyReadManager
2025-11-12 13:08:34,106 - ispa_next.rkr_manager.main - DEBUG - early exiting RemoteKeyReadManager - enabled=False or early_exit_enabled=True
2025-11-12 13:08:34,107 - ispa_next.functions - DEBUG - generate_attachments
2025-11-12 13:08:34,108 - ispa_next.functions - DEBUG - check_service_requirement
2025-11-12 13:08:34,109 - ispa_next.common.shared - DEBUG - Attempting to open ISPA tab: Wartung
2025-11-12 13:08:34,588 - ispa_next.common.shared - DEBUG - Successfully opened ISPA tab: Wartung
2025-11-12 13:08:38,760 - ispa_next.functions - DEBUG - check_service_requirement result: pdf_needed =False
2025-11-12 13:08:38,764 - ispa_next.wipers - DEBUG - handle_wiper_service_contracts
2025-11-12 13:08:38,764 - ispa_next.common.shared - DEBUG - Attempting to open ISPA tab: Wartung
2025-11-12 13:08:38,891 - ispa_next.common.shared - DEBUG - ISPA tab Wartung is already open
2025-11-12 13:08:44,449 - ispa_next.common.shared - DEBUG - Attempting to open ISPA tab: Kunden & Fahrzeug
2025-11-12 13:08:44,975 - ispa_next.common.shared - DEBUG - Successfully opened ISPA tab: Kunden & Fahrzeug
2025-11-12 13:08:44,977 - ispa_next.common.shared - DEBUG - Attempting to open ISPA tab: Wartung
2025-11-12 13:08:45,734 - ispa_next.common.shared - DEBUG - Successfully opened ISPA tab: Wartung
2025-11-12 13:08:45,736 - ispa_next.package_manager.main - DEBUG - updating cart content
2025-11-12 13:08:50,979 - ispa_next.package_manager.main - DEBUG - updating advice list content
2025-11-12 13:08:50,981 - ispa_next.package_manager.helper - DEBUG - get_advice_list_contents
2025-11-12 13:08:51,916 - ispa_next.package_manager.main - DEBUG - determining package movements
2025-11-12 13:08:51,917 - ispa_next.package_manager.main - DEBUG - determining packages to place
2025-11-12 13:08:51,920 - ispa_next.package_manager.main - DEBUG - found packages to cart: {Package(name=Kostenlose Fzg Reinigung, source=from_tab, target=cart)}
2025-11-12 13:08:51,922 - ispa_next.package_manager.main - DEBUG - determining packages to place
2025-11-12 13:08:51,927 - ispa_next.package_manager.main - DEBUG - found packages to advice_list: {Package(name=Beide Bremsscheiben vorn aus- und einbauen/ersetze, source=manual, target=advice_list), Package(name=Ladewunsch und Ladezustand, source=cart, target=advice_list), Package(name=Beide Bremsscheiben hinten aus- und einbauen/erset, source=manual, target=advice_list)}
2025-11-12 13:08:51,931 - ispa_next.package_manager.main - DEBUG - determining package to delete
2025-11-12 13:08:51,935 - ispa_next.package_manager.main - DEBUG - found packages to delete: set()
2025-11-12 13:08:51,935 - ispa_next.package_manager.main - DEBUG - determining package to update
2025-11-12 13:08:51,937 - ispa_next.package_manager.main - DEBUG - found packages to update: {Package(name=Bremse vorn, source=cart, target=update), Package(name=Bremse hinten, source=cart, target=update)}
2025-11-12 13:08:51,939 - ispa_next.package_manager.helper - DEBUG - add_to_cart called
2025-11-12 13:08:52,643 - ispa_next.common.shared - DEBUG - Attempting to open ISPA tab: Marketing
2025-11-12 13:08:53,309 - ispa_next.common.shared - DEBUG - Successfully opened ISPA tab: Marketing
2025-11-12 13:08:55,668 - ispa_next.package_manager.helper - DEBUG - _add_to_container_manual
2025-11-12 13:08:55,669 - ispa_next.package_manager.helper - DEBUG - cart_operation called
2025-11-12 13:08:58,177 - ispa_next.package_manager.helper - DEBUG - Package name not found with coordinate: (-1700, 0)
2025-11-12 13:08:58,722 - ispa_next.package_manager.helper - DEBUG - Package name not found with coordinate: (-1685, 0)
2025-11-12 13:08:59,650 - root - WARNING - Failed to scroll control: (-2146233079, None, (None, None, None, 0, None))
2025-11-12 13:09:00,267 - ispa_next.package_manager.helper - DEBUG - Package name not found with coordinate: (-1700, 0)
2025-11-12 13:09:00,788 - ispa_next.package_manager.helper - DEBUG - Package name not found with coordinate: (-1685, 0)
2025-11-12 13:09:02,117 - root - WARNING - Failed to scroll control: (-2146233079, None, (None, None, None, 0, None))
2025-11-12 13:09:02,670 - ispa_next.package_manager.helper - DEBUG - Package name not found with coordinate: (-1700, 0)
2025-11-12 13:09:03,191 - ispa_next.package_manager.helper - DEBUG - Package name not found with coordinate: (-1685, 0)
2025-11-12 13:09:04,094 - root - WARNING - Failed to scroll control: (-2146233079, None, (None, None, None, 0, None))
2025-11-12 13:09:04,677 - ispa_next.package_manager.helper - DEBUG - Package name not found with coordinate: (-1700, 0)
2025-11-12 13:09:05,200 - ispa_next.package_manager.helper - DEBUG - Package name not found with coordinate: (-1685, 0)
2025-11-12 13:09:06,124 - root - WARNING - Failed to scroll control: (-2146233079, None, (None, None, None, 0, None))
2025-11-12 13:09:06,697 - ispa_next.package_manager.helper - DEBUG - Package name not found with coordinate: (-1700, 0)
2025-11-12 13:09:07,250 - ispa_next.package_manager.helper - DEBUG - Package name not found with coordinate: (-1685, 0)
2025-11-12 13:09:08,180 - root - WARNING - Failed to scroll control: (-2146233079, None, (None, None, None, 0, None))
2025-11-12 13:09:08,729 - ispa_next.package_manager.helper - DEBUG - Package name not found with coordinate: (-1700, 0)
2025-11-12 13:09:09,274 - ispa_next.package_manager.helper - DEBUG - Package name not found with coordinate: (-1685, 0)
2025-11-12 13:09:10,245 - root - WARNING - Failed to scroll control: (-2146233079, None, (None, None, None, 0, None))
2025-11-12 13:09:10,810 - ispa_next.package_manager.helper - DEBUG - Package name not found with coordinate: (-1700, 0)
2025-11-12 13:09:11,329 - ispa_next.package_manager.helper - DEBUG - Package name not found with coordinate: (-1685, 0)
2025-11-12 13:09:12,245 - root - WARNING - Failed to scroll control: (-2146233079, None, (None, None, None, 0, None))
2025-11-12 13:09:12,824 - ispa_next.package_manager.helper - DEBUG - Package name not found with coordinate: (-1700, 0)
2025-11-12 13:09:13,353 - ispa_next.package_manager.helper - DEBUG - Package name not found with coordinate: (-1685, 0)
2025-11-12 13:09:14,267 - root - WARNING - Failed to scroll control: (-2146233079, None, (None, None, None, 0, None))
2025-11-12 13:09:14,859 - ispa_next.package_manager.helper - DEBUG - Package name not found with coordinate: (-1700, 0)
2025-11-12 13:09:15,393 - ispa_next.package_manager.helper - DEBUG - Package name not found with coordinate: (-1685, 0)
2025-11-12 13:09:16,318 - root - WARNING - Failed to scroll control: (-2146233079, None, (None, None, None, 0, None))
2025-11-12 13:09:17,370 - ispa_next.package_manager.helper - DEBUG - Package name not found with coordinate: (-1700, 0)
2025-11-12 13:09:18,310 - root - WARNING - Failed to scroll control: (-2146233079, None, (None, None, None, 0, None))
2025-11-12 13:09:18,898 - ispa_next.package_manager.helper - DEBUG - add_to_advice_list called
2025-11-12 13:09:19,597 - ispa_next.package_manager.helper - DEBUG - _add_to_container_manual
2025-11-12 13:09:28,455 - ispa_next.package_manager.helper - DEBUG - cart_operation called
2025-11-12 13:09:30,754 - ispa_next.package_manager.helper - DEBUG - Package name not found with coordinate: (-1700, 0)
2025-11-12 13:09:31,292 - ispa_next.package_manager.helper - DEBUG - Package name not found with coordinate: (-1685, 0)
2025-11-12 13:09:32,269 - root - WARNING - Failed to scroll control: (-2146233079, None, (None, None, None, 0, None))
2025-11-12 13:09:32,849 - ispa_next.package_manager.helper - DEBUG - Package name not found with coordinate: (-1700, 0)
2025-11-12 13:09:33,369 - ispa_next.package_manager.helper - DEBUG - Package name not found with coordinate: (-1685, 0)
2025-11-12 13:09:34,280 - root - WARNING - Failed to scroll control: (-2146233079, None, (None, None, None, 0, None))
2025-11-12 13:09:34,856 - ispa_next.package_manager.helper - DEBUG - Package name not found with coordinate: (-1700, 0)
2025-11-12 13:09:35,375 - ispa_next.package_manager.helper - DEBUG - Package name not found with coordinate: (-1685, 0)
2025-11-12 13:09:36,299 - root - WARNING - Failed to scroll control: (-2146233079, None, (None, None, None, 0, None))
2025-11-12 13:09:36,864 - ispa_next.package_manager.helper - DEBUG - Package name not found with coordinate: (-1700, 0)
2025-11-12 13:09:37,394 - ispa_next.package_manager.helper - DEBUG - Package name not found with coordinate: (-1685, 0)
2025-11-12 13:09:38,304 - root - WARNING - Failed to scroll control: (-2146233079, None, (None, None, None, 0, None))
2025-11-12 13:09:38,871 - ispa_next.package_manager.helper - DEBUG - Package name not found with coordinate: (-1700, 0)
2025-11-12 13:09:39,394 - ispa_next.package_manager.helper - DEBUG - Package name not found with coordinate: (-1685, 0)
2025-11-12 13:09:40,331 - ispa_next.package_manager.helper - DEBUG - _update_parts_in_package
2025-11-12 13:09:45,984 - root - WARNING - Failed to scroll control: (-2146233079, None, (None, None, None, 0, None))
2025-11-12 13:09:46,552 - ispa_next.package_manager.helper - DEBUG - Package name not found with coordinate: (-1700, 0)
2025-11-12 13:09:47,087 - ispa_next.package_manager.helper - DEBUG - Package name not found with coordinate: (-1685, 0)
2025-11-12 13:09:48,044 - ispa_next.package_manager.helper - DEBUG - _update_parts_in_package
2025-11-12 13:09:53,782 - root - WARNING - Failed to scroll control: (-2146233079, None, (None, None, None, 0, None))
2025-11-12 13:09:54,329 - ispa_next.package_manager.helper - DEBUG - Package name not found with coordinate: (-1700, 0)
2025-11-12 13:09:54,909 - ispa_next.package_manager.helper - DEBUG - Package name not found with coordinate: (-1685, 0)
2025-11-12 13:09:55,844 - root - WARNING - Failed to scroll control: (-2146233079, None, (None, None, None, 0, None))
2025-11-12 13:09:56,410 - ispa_next.package_manager.helper - DEBUG - Package name not found with coordinate: (-1700, 0)
2025-11-12 13:09:56,942 - ispa_next.package_manager.helper - DEBUG - Package name not found with coordinate: (-1685, 0)
2025-11-12 13:09:57,853 - root - WARNING - Failed to scroll control: (-2146233079, None, (None, None, None, 0, None))
2025-11-12 13:09:59,168 - ispa_next.package_manager.helper - DEBUG - Package name not found with coordinate: (-1700, 0)
2025-11-12 13:10:00,076 - root - WARNING - Failed to scroll control: (-2146233079, None, (None, None, None, 0, None))
2025-11-12 13:10:00,683 - ispa_next.package_manager.helper - DEBUG - Package name not found with coordinate: (-1700, 0)
2025-11-12 13:10:01,633 - root - WARNING - Failed to scroll control: (-2146233079, None, (None, None, None, 0, None))
2025-11-12 13:10:02,178 - ispa_next.package_manager.helper - DEBUG - Package name not found with coordinate: (-1700, 0)
2025-11-12 13:10:03,091 - root - WARNING - Failed to scroll control: (-2146233079, None, (None, None, None, 0, None))
2025-11-12 13:10:03,714 - ispa_next.functions - DEBUG - verify_cart_packages_additional_texts
2025-11-12 13:10:03,729 - ispa_next.functions - DEBUG - check_cart_for_additional_text_packages
2025-11-12 13:10:03,742 - ispa_next.functions - DEBUG - get_cart_contents
2025-11-12 13:10:09,712 - ispa_next.functions - DEBUG - Adding additional texts to cart items
2025-11-12 13:10:14,407 - ispa_next.functions - DEBUG - handle_mobility_replacement
2025-11-12 13:10:14,409 - ispa_next.functions - DEBUG - verify_battery_in_motoroil_package
2025-11-12 13:10:14,413 - ispa_next.functions - DEBUG - get_cart_contents
2025-11-12 13:10:20,513 - ispa_next.functions - DEBUG - verify_breaks_in_break_package
2025-11-12 13:10:20,514 - ispa_next.functions - DEBUG - verify breaks added if breaks service in cart
2025-11-12 13:10:20,522 - ispa_next.functions - DEBUG - get_cart_contents
2025-11-12 13:10:26,590 - ispa_next.common.shared - DEBUG - Attempting to open ISPA tab: Wartung
2025-11-12 13:10:27,058 - ispa_next.common.shared - DEBUG - Successfully opened ISPA tab: Wartung
2025-11-12 13:10:32,573 - ispa_next.functions - DEBUG - added beide Bremsscheiben vorne to cart
2025-11-12 13:10:33,817 - ispa_next.functions - DEBUG - added beide Bremsscheiben hinten to cart
2025-11-12 13:10:35,748 - ispa_next.functions - DEBUG - process_check_control
2025-11-12 13:10:35,749 - ispa_next.functions - DEBUG - trying add_material_to_package
2025-11-12 13:10:35,750 - ispa_next.functions - DEBUG - get_cart_contents
2025-11-12 13:10:42,980 - ispa_next.functions - DEBUG - notify_aw_increase_to_service_advisor
2025-11-12 13:10:57,158 - ispa_next.functions - DEBUG - get_cart_contents
2025-11-12 13:11:04,664 - ispa_next.common.mail - INFO - Successfully sent an email to 3 recipients
2025-11-12 13:11:04,668 - ispa_next.functions - DEBUG - check_cart_packages_for_parts_service_and_parts_availability
2025-11-12 13:11:04,670 - ispa_next.appointment_ending - DEBUG - entered complete process
2025-11-12 13:11:04,670 - ispa_next.appointment_loop.helpers - DEBUG - Checking for potential OIDC Login dialog
2025-11-12 13:11:05,687 - ispa_next.common.shared - DEBUG - Attempting to open ISPA tab: Abschluss
2025-11-12 13:11:06,505 - ispa_next.common.shared - DEBUG - Successfully opened ISPA tab: Abschluss
2025-11-12 13:11:06,507 - ispa_next.appointment_ending - DEBUG - complete_process isn't exiting early.
2025-11-12 13:11:08,353 - ispa_next.appointment_ending - DEBUG - No need to assign service parts target.
2025-11-12 13:11:16,664 - ispa_next.appointment_ending - DEBUG - return from complete process straight to process_list with saving without error_dialog.
2025-11-12 13:11:17,033 - ispa_next.appointment_loop.main - DEBUG - Closing appointment 3.
2025-11-12 13:11:17,878 - ispa_next.appointments.functions - DEBUG - filter_appointments_grid_by_term
2025-11-12 13:11:20,366 - ispa_next.appointments.functions - DEBUG - Gross total count for all events at location: 533
2025-11-12 13:11:20,366 - ispa_next.appointments.functions - DEBUG - Unfiltered total count for 'Terminvereinbarung' events: 1
2025-11-12 13:11:22,858 - ispa_next.appointments.functions - DEBUG - Filtered by term total count for 'Terminvereinbarung' events: 34
2025-11-12 13:11:22,858 - ispa_next.appointments.functions - DEBUG - fetch_appointments_from_grid
2025-11-12 13:11:23,580 - ispa_next.appointments.models - DEBUG - Appointment Dieter Heining QLB-OO 801 WBA6L31070FJ29638 ohne Termin.
2025-11-12 13:11:23,587 - ispa_next.appointments.models - DEBUG - Couldn't parse Appointment Firma Weber Isoliertechnik GmbH & Co WEN-IW 666/ WBA55DP070N234138, 2 validation errors for Appointment
Kennzeichen
  Value error, 'Kennzeichen' includes unallowed special characters. [type=value_error, input_value='WEN-IW 666/', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/value_error
Termin
  Value error, time data '' does not match format '%d.%m.%Y %H:%M' [type=value_error, input_value='', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/value_error
2025-11-12 13:11:23,593 - ispa_next.appointments.models - DEBUG - Appointment Klaus Faltermeier SAD-MF 315 WMWWJ510403M12730 ohne Termin.
2025-11-12 13:11:23,596 - ispa_next.main - DEBUG - 



2025-11-12 13:11:23,596 - ispa_next.main - DEBUG - starting with process 4 (SAD-LF 333) of 4
2025-11-12 13:11:23,599 - ispa_next.appointment_loop.helpers - DEBUG - Checking for potential OIDC Login dialog
2025-11-12 13:11:24,363 - ispa_next.appointments.functions - DEBUG - filter_appointments_grid_by_term
2025-11-12 13:11:25,167 - ispa_next.appointments.functions - DEBUG - Gross total count for all events at location: 533
2025-11-12 13:11:25,168 - ispa_next.appointments.functions - DEBUG - Unfiltered total count for 'Terminvereinbarung' events: 34
2025-11-12 13:11:26,207 - ispa_next.appointments.functions - DEBUG - Filtered by term total count for 'Terminvereinbarung' events: 1
2025-11-12 13:11:26,208 - ispa_next.appointments.functions - DEBUG - fetch_appointments_from_grid
2025-11-12 13:11:51,464 - ispa_next.rkr_manager.main - DEBUG - RemoteKeyReadManager initialized
2025-11-12 13:12:01,536 - ispa_next.functions - DEBUG - get_cart_contents
2025-11-12 13:12:04,095 - ispa_next.functions - DEBUG - check_and_verify_hu_date
2025-11-12 13:12:04,095 - ispa_next.common.shared - DEBUG - Attempting to open ISPA tab: Kunden & Fahrzeug
2025-11-12 13:12:04,168 - ispa_next.common.shared - DEBUG - ISPA tab Kunden & Fahrzeug is already open
2025-11-12 13:12:04,410 - ispa_next.functions - DEBUG - HU date soon to be invalid in 60 days.
2025-11-12 13:12:11,152 - ispa_next.functions - DEBUG - check_potential_workshop_test
2025-11-12 13:12:11,154 - ispa_next.functions - DEBUG - check_vehicle_age_for_service_plus
2025-11-12 13:12:11,154 - ispa_next.common.shared - DEBUG - Attempting to open ISPA tab: Kunden & Fahrzeug
2025-11-12 13:12:11,249 - ispa_next.common.shared - DEBUG - ISPA tab Kunden & Fahrzeug is already open
2025-11-12 13:12:14,538 - ispa_next.rkr_manager.main - DEBUG - running RemoteKeyReadManager
2025-11-12 13:12:14,540 - ispa_next.common.shared - DEBUG - Attempting to open ISPA tab: Wartung
2025-11-12 13:12:15,856 - ispa_next.common.shared - DEBUG - Successfully opened ISPA tab: Wartung
2025-11-12 13:12:17,873 - ispa_next.rkr_manager.state - DEBUG - Entering initial state
2025-11-12 13:12:18,140 - ispa_next.rkr_manager.state - DEBUG - Checking customer consent
2025-11-12 13:12:21,368 - ispa_next.rkr_manager.state - DEBUG - Checking data freshness
2025-11-12 13:12:21,431 - ispa_next.rkr_manager.state - DEBUG - Checking color in CBS positions
2025-11-12 13:12:25,666 - ispa_next.rkr_manager.state - DEBUG - State machine completed with reason: data_still_good
2025-11-12 13:12:26,671 - ispa_next.functions - DEBUG - handle_data_privacy_consent
2025-11-12 13:12:26,672 - ispa_next.common.shared - DEBUG - Attempting to open ISPA tab: Kunden & Fahrzeug
2025-11-12 13:12:27,129 - ispa_next.common.shared - DEBUG - Successfully opened ISPA tab: Kunden & Fahrzeug
2025-11-12 13:12:38,633 - ispa_next.functions - DEBUG - DSE icon is yellow
2025-11-12 13:12:38,633 - ispa_next.functions - DEBUG - DSE dealer channels are valid
2025-11-12 13:12:45,296 - ispa_next.functions - DEBUG - transfer_customer_data_to_appointment
2025-11-12 13:12:45,298 - ispa_next.common.shared - DEBUG - Attempting to open ISPA tab: Kunden & Fahrzeug
2025-11-12 13:12:45,370 - ispa_next.common.shared - DEBUG - ISPA tab Kunden & Fahrzeug is already open
2025-11-12 13:12:45,371 - ispa_next.functions - DEBUG - fetch_customer_data
2025-11-12 13:12:45,440 - ispa_next.functions - DEBUG - fetch_customer_data_from_bmw_id
2025-11-12 13:12:46,628 - ispa_next.functions - DEBUG - fetch_customer_data_from_dms
2025-11-12 13:12:48,042 - ispa_next.functions - DEBUG - All data found, skipping remaining sources
2025-11-12 13:12:48,276 - ispa_next.functions - DEBUG - copy_customer_data_to_appointment
2025-11-12 13:12:52,052 - ispa_next.functions - DEBUG - Updated appointment (AA00045556) customer contact data.
2025-11-12 13:12:52,972 - ispa_next.functions - DEBUG - check_for_alpina_vehicle
2025-11-12 13:12:52,972 - ispa_next.functions - DEBUG - check_bmw_id_add_to_list
2025-11-12 13:12:53,738 - ispa_next.functions - DEBUG - check_home_dealer_add_to_list
2025-11-12 13:12:53,739 - ispa_next.common.shared - DEBUG - Attempting to open ISPA tab: Fahrzeugzustand
2025-11-12 13:12:54,482 - ispa_next.common.shared - DEBUG - Successfully opened ISPA tab: Fahrzeugzustand
2025-11-12 13:12:58,506 - ispa_next.functions - DEBUG - Home dealer assignment button not available
2025-11-12 13:12:58,506 - ispa_next.rkr_manager.main - DEBUG - running RemoteKeyReadManager
2025-11-12 13:12:58,506 - ispa_next.rkr_manager.main - DEBUG - early exiting RemoteKeyReadManager - enabled=False or early_exit_enabled=True
2025-11-12 13:12:58,510 - ispa_next.functions - DEBUG - generate_attachments
2025-11-12 13:12:58,510 - ispa_next.functions - DEBUG - check_service_requirement
2025-11-12 13:12:58,510 - ispa_next.common.shared - DEBUG - Attempting to open ISPA tab: Wartung
2025-11-12 13:12:59,070 - ispa_next.common.shared - DEBUG - Successfully opened ISPA tab: Wartung
2025-11-12 13:13:03,260 - ispa_next.functions - DEBUG - check_service_requirement result: pdf_needed =False
2025-11-12 13:13:03,264 - ispa_next.wipers - DEBUG - handle_wiper_service_contracts
2025-11-12 13:13:03,265 - ispa_next.common.shared - DEBUG - Attempting to open ISPA tab: Wartung
2025-11-12 13:13:03,330 - ispa_next.common.shared - DEBUG - ISPA tab Wartung is already open
2025-11-12 13:13:08,840 - ispa_next.common.shared - DEBUG - Attempting to open ISPA tab: Kunden & Fahrzeug
2025-11-12 13:13:09,351 - ispa_next.common.shared - DEBUG - Successfully opened ISPA tab: Kunden & Fahrzeug
2025-11-12 13:13:09,351 - ispa_next.common.shared - DEBUG - Attempting to open ISPA tab: Wartung
2025-11-12 13:13:09,982 - ispa_next.common.shared - DEBUG - Successfully opened ISPA tab: Wartung
2025-11-12 13:13:09,984 - ispa_next.package_manager.main - DEBUG - updating cart content
2025-11-12 13:13:12,500 - ispa_next.package_manager.main - DEBUG - updating advice list content
2025-11-12 13:13:12,502 - ispa_next.package_manager.helper - DEBUG - get_advice_list_contents
2025-11-12 13:13:13,546 - ispa_next.package_manager.main - DEBUG - determining package movements
2025-11-12 13:13:13,549 - ispa_next.package_manager.main - DEBUG - determining packages to place
2025-11-12 13:13:13,553 - ispa_next.package_manager.main - DEBUG - found packages to cart: {Package(name=Kostenlose Fzg Reinigung, source=from_tab, target=cart)}
2025-11-12 13:13:13,555 - ispa_next.package_manager.main - DEBUG - determining packages to place
2025-11-12 13:13:13,557 - ispa_next.package_manager.main - DEBUG - Cannot place Beide Bremsscheiben vorn aus- und einbauen/ersetze: placement requirements not met
2025-11-12 13:13:13,559 - ispa_next.package_manager.main - DEBUG - Cannot place Ladewunsch und Ladezustand: not present in source
2025-11-12 13:13:13,561 - ispa_next.package_manager.main - DEBUG - Cannot place Beide Bremsscheiben hinten aus- und einbauen/erset: placement requirements not met
2025-11-12 13:13:13,563 - ispa_next.package_manager.main - DEBUG - found packages to advice_list: set()
2025-11-12 13:13:13,563 - ispa_next.package_manager.main - DEBUG - determining package to delete
2025-11-12 13:13:13,567 - ispa_next.package_manager.main - DEBUG - found packages to delete: set()
2025-11-12 13:13:13,567 - ispa_next.package_manager.main - DEBUG - determining package to update
2025-11-12 13:13:13,569 - ispa_next.package_manager.main - DEBUG - found packages to update: set()
2025-11-12 13:13:13,571 - ispa_next.package_manager.helper - DEBUG - add_to_cart called
2025-11-12 13:13:14,312 - ispa_next.common.shared - DEBUG - Attempting to open ISPA tab: Marketing
2025-11-12 13:13:15,109 - ispa_next.common.shared - DEBUG - Successfully opened ISPA tab: Marketing
2025-11-12 13:13:17,252 - ispa_next.package_manager.helper - DEBUG - _add_to_container_manual
2025-11-12 13:13:17,254 - ispa_next.functions - DEBUG - verify_cart_packages_additional_texts
2025-11-12 13:13:17,256 - ispa_next.functions - DEBUG - check_cart_for_additional_text_packages
2025-11-12 13:13:17,256 - ispa_next.functions - DEBUG - get_cart_contents
2025-11-12 13:13:20,734 - ispa_next.functions - DEBUG - Adding additional texts to cart items
2025-11-12 13:13:22,834 - ispa_next.functions - DEBUG - handle_mobility_replacement
2025-11-12 13:13:22,835 - ispa_next.functions - DEBUG - verify_battery_in_motoroil_package
2025-11-12 13:13:22,836 - ispa_next.functions - DEBUG - get_cart_contents
2025-11-12 13:13:26,075 - ispa_next.functions - DEBUG - verify_breaks_in_break_package
2025-11-12 13:13:26,075 - ispa_next.functions - DEBUG - verify breaks added if breaks service in cart
2025-11-12 13:13:26,081 - ispa_next.functions - DEBUG - get_cart_contents
2025-11-12 13:13:29,306 - ispa_next.functions - DEBUG - process_check_control
2025-11-12 13:13:29,306 - ispa_next.functions - DEBUG - trying add_material_to_package
2025-11-12 13:13:29,308 - ispa_next.functions - DEBUG - get_cart_contents
2025-11-12 13:13:32,506 - ispa_next.functions - DEBUG - notify_aw_increase_to_service_advisor
2025-11-12 13:13:43,441 - ispa_next.functions - DEBUG - check_cart_packages_for_parts_service_and_parts_availability
2025-11-12 13:13:43,441 - ispa_next.appointment_ending - DEBUG - entered complete process
2025-11-12 13:13:43,443 - ispa_next.appointment_loop.helpers - DEBUG - Checking for potential OIDC Login dialog
2025-11-12 13:13:44,111 - ispa_next.common.shared - DEBUG - Attempting to open ISPA tab: Abschluss
2025-11-12 13:13:44,670 - ispa_next.common.shared - DEBUG - Successfully opened ISPA tab: Abschluss
2025-11-12 13:13:44,671 - ispa_next.appointment_ending - DEBUG - complete_process isn't exiting early.
2025-11-12 13:13:46,375 - ispa_next.appointment_ending - DEBUG - No need to assign service parts target.
2025-11-12 13:13:52,894 - ispa_next.appointment_ending - DEBUG - return from complete process straight to process_list with saving without error_dialog.
2025-11-12 13:13:53,283 - ispa_next.appointment_loop.main - DEBUG - Closing appointment 4.
2025-11-12 13:13:53,687 - ispa_next.appointments.functions - DEBUG - filter_appointments_grid_by_term
2025-11-12 13:13:55,945 - ispa_next.appointments.functions - DEBUG - Gross total count for all events at location: 534
2025-11-12 13:13:55,947 - ispa_next.appointments.functions - DEBUG - Unfiltered total count for 'Terminvereinbarung' events: 1
2025-11-12 13:13:58,463 - ispa_next.appointments.functions - DEBUG - Filtered by term total count for 'Terminvereinbarung' events: 35
2025-11-12 13:13:58,464 - ispa_next.appointments.functions - DEBUG - fetch_appointments_from_grid
2025-11-12 13:13:59,106 - ispa_next.appointments.models - DEBUG - Appointment Siegfried Keck SAD-SK 305 WBAYH110205P92779 ohne Termin.
2025-11-12 13:13:59,112 - ispa_next.appointments.models - DEBUG - Appointment Dieter Heining QLB-OO 801 WBA6L31070FJ29638 ohne Termin.
2025-11-12 13:13:59,117 - ispa_next.appointments.models - DEBUG - Couldn't parse Appointment Firma Weber Isoliertechnik GmbH & Co WEN-IW 666/ WBA55DP070N234138, 2 validation errors for Appointment
Kennzeichen
  Value error, 'Kennzeichen' includes unallowed special characters. [type=value_error, input_value='WEN-IW 666/', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/value_error
Termin
  Value error, time data '' does not match format '%d.%m.%Y %H:%M' [type=value_error, input_value='', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/value_error
2025-11-12 13:13:59,122 - ispa_next.appointments.models - DEBUG - Appointment Klaus Faltermeier SAD-MF 315 WMWWJ510403M12730 ohne Termin.
